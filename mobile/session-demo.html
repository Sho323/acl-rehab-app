<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‹å‹•ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Ÿè¡Œç”»é¢ - ãƒ‡ãƒ¢</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: #f5f5f5; 
        }
        .phone-frame { 
            max-width: 375px; 
            margin: 0 auto; 
            background: #000; 
            border-radius: 20px; 
            padding: 8px; 
            box-shadow: 0 8px 24px rgba(0,0,0,0.3); 
        }
        .screen { 
            background: white; 
            border-radius: 16px; 
            overflow: hidden; 
            min-height: 600px; 
            position: relative; 
        }
        .header { 
            background: #2196F3; 
            color: white; 
            padding: 20px; 
            text-align: center; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        .content { 
            padding: 20px; 
            padding-bottom: 80px;
        }
        .card { 
            background: white; 
            border-radius: 12px; 
            padding: 16px; 
            margin: 12px 0; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
        }
        .progress-bar { 
            width: 100%; 
            height: 8px; 
            background: #e0e0e0; 
            border-radius: 4px; 
            overflow: hidden; 
            margin: 8px 0; 
        }
        .progress-fill { 
            height: 100%; 
            border-radius: 4px; 
            transition: width 0.3s ease; 
        }
        .exercise-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 12px; 
        }
        .exercise-name { 
            font-size: 18px; 
            font-weight: bold; 
            flex: 1; 
        }
        .ai-chip { 
            background: #2196F3; 
            color: white; 
            padding: 4px 8px; 
            border-radius: 12px; 
            font-size: 10px; 
            display: flex; 
            align-items: center; 
            gap: 4px; 
        }
        .rest-surface { 
            background: #E3F2FD; 
            border-radius: 12px; 
            padding: 24px; 
            text-align: center; 
            margin: 12px 0; 
        }
        .rest-title { 
            font-size: 20px; 
            font-weight: bold; 
            color: #1976D2; 
            margin-bottom: 8px; 
        }
        .rest-time { 
            font-size: 36px; 
            font-weight: bold; 
            color: #1976D2; 
            margin-bottom: 16px; 
        }
        .set-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 16px; 
        }
        .set-title, .rep-title { 
            font-size: 16px; 
            font-weight: bold; 
        }
        .rep-title { 
            color: #2196F3; 
        }
        .timer-container { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin: 16px 0; 
        }
        .timer-value { 
            font-size: 18px; 
            font-weight: bold; 
        }
        .btn { 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            font-size: 16px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: all 0.2s; 
            margin: 4px; 
        }
        .btn-primary { 
            background: #4CAF50; 
            color: white; 
            width: 100%; 
        }
        .btn-primary:hover { 
            background: #45a049; 
        }
        .btn-primary:disabled { 
            background: #ccc; 
            cursor: not-allowed; 
        }
        .btn-outlined { 
            background: white; 
            color: #2196F3; 
            border: 1px solid #2196F3; 
        }
        .btn-outlined:hover { 
            background: #f0f8ff; 
        }
        .control-row { 
            display: flex; 
            gap: 8px; 
        }
        .control-button { 
            flex: 1; 
        }
        .modal { 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: rgba(0,0,0,0.5); 
            display: none; 
            align-items: center; 
            justify-content: center; 
            z-index: 1000; 
        }
        .modal.show { 
            display: flex; 
        }
        .modal-content { 
            background: white; 
            border-radius: 12px; 
            padding: 20px; 
            margin: 20px; 
            max-width: 300px; 
            width: 100%; 
        }
        .rating-buttons { 
            display: flex; 
            flex-wrap: wrap; 
            gap: 4px; 
            margin: 8px 0 16px 0; 
        }
        .rating-btn { 
            padding: 8px 12px; 
            border: 1px solid #2196F3; 
            border-radius: 6px; 
            background: white; 
            color: #2196F3; 
            cursor: pointer; 
            font-size: 12px; 
            min-width: 40px; 
            text-align: center; 
        }
        .rating-btn.active { 
            background: #2196F3; 
            color: white; 
        }
        .hidden { 
            display: none; 
        }
    </style>
</head>
<body>
    <h1 style="text-align: center; margin-bottom: 20px;">é‹å‹•ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Ÿè¡Œç”»é¢ - ãƒ‡ãƒ¢</h1>
    
    <div class="phone-frame">
        <div class="screen">
            <div class="header">
                <h2>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œ</h2>
            </div>
            
            <div class="content">
                <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³é€²æ— -->
                <div class="card">
                    <h3 style="margin: 0 0 12px 0;">ã‚»ãƒƒã‚·ãƒ§ãƒ³é€²æ—</h3>
                    <div class="progress-bar">
                        <div id="session-progress" class="progress-fill" style="width: 33%; background: #4CAF50;"></div>
                    </div>
                    <p id="progress-text" style="text-align: center; color: #666; margin: 8px 0 0 0;">1 / 3 é‹å‹•å®Œäº†</p>
                </div>

                <!-- ç¾åœ¨ã®é‹å‹•æƒ…å ± -->
                <div class="card">
                    <div class="exercise-header">
                        <span id="exercise-name" class="exercise-name">å¤§è…¿å››é ­ç­‹ã‚»ãƒƒãƒ†ã‚£ãƒ³ã‚°</span>
                        <span id="ai-chip" class="ai-chip hidden">ğŸ“¹ AIåˆ†æ</span>
                    </div>
                    <p id="exercise-description" style="color: #666; margin: 8px 0 4px 0;">è†ã‚’ä¼¸ã°ã—ãŸçŠ¶æ…‹ã§å¤ªã‚‚ã‚‚ã®å‰ã®ç­‹è‚‰ã‚’åç¸®</p>
                    <p style="color: #888; font-size: 12px; margin: 0;">ã‚«ãƒ†ã‚´ãƒªãƒ¼: <span id="exercise-category">ç­‹åŠ›ç¶­æŒ</span></p>
                </div>

                <!-- ä¼‘æ†©ä¸­ã®è¡¨ç¤º -->
                <div id="rest-display" class="rest-surface hidden">
                    <div class="rest-title">ä¼‘æ†©ä¸­</div>
                    <div id="rest-time" class="rest-time">00:30</div>
                    <button class="btn btn-outlined" onclick="skipRest()">ä¼‘æ†©ã‚’ã‚¹ã‚­ãƒƒãƒ—</button>
                </div>

                <!-- ã‚»ãƒƒãƒˆãƒ»ãƒ¬ãƒƒãƒ—æƒ…å ± -->
                <div id="set-display" class="card">
                    <div class="set-header">
                        <span class="set-title">ã‚»ãƒƒãƒˆ <span id="current-set">1</span> / <span id="total-sets">3</span></span>
                        <span class="rep-title"><span id="current-reps">0</span> / <span id="total-reps">15</span> å›</span>
                    </div>
                    
                    <div class="progress-bar" style="margin-bottom: 16px;">
                        <div id="rep-progress" class="progress-fill" style="width: 0%; background: #2196F3;"></div>
                    </div>

                    <div class="timer-container">
                        <span style="color: #666;">é‹å‹•æ™‚é–“</span>
                        <span id="exercise-timer" class="timer-value">00:00</span>
                    </div>

                    <button id="next-btn" class="btn btn-primary" onclick="nextRep()">æ¬¡ã®å›æ•°</button>
                </div>

                <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ -->
                <div class="card">
                    <div class="control-row">
                        <button id="pause-btn" class="btn btn-outlined control-button" onclick="togglePause()">ä¸€æ™‚åœæ­¢</button>
                        <button class="btn btn-outlined control-button" onclick="showCompletionModal()">ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å®Œäº†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="completion-modal" class="modal">
        <div class="modal-content">
            <h3 style="text-align: center; margin: 0 0 16px 0;">ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†</h3>
            <p style="text-align: center; color: #666; margin-bottom: 20px;">
                ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼ä»Šæ—¥ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¯ã©ã†ã§ã—ãŸã‹ï¼Ÿ
            </p>
            
            <div style="border-top: 1px solid #eee; padding-top: 20px;">
                <div style="margin-bottom: 16px;">
                    <label style="font-weight: bold; margin-bottom: 8px; display: block;">ç—›ã¿ãƒ¬ãƒ™ãƒ« (0-10)</label>
                    <div class="rating-buttons" id="pain-rating">
                        <!-- 0-10ã®ãƒœã‚¿ãƒ³ãŒJSã§ç”Ÿæˆã•ã‚Œã‚‹ -->
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="font-weight: bold; margin-bottom: 8px; display: block;">ç–²åŠ´åº¦ (6-20)</label>
                    <div class="rating-buttons" id="fatigue-rating">
                        <!-- 6,8,10,12,14,16,18,20ã®ãƒœã‚¿ãƒ³ãŒJSã§ç”Ÿæˆã•ã‚Œã‚‹ -->
                    </div>
                </div>

                <div class="control-row">
                    <button class="btn btn-outlined control-button" onclick="hideCompletionModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button class="btn btn-primary control-button" onclick="completeSession()">å®Œäº†</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentExerciseIndex = 0;
        let currentSet = 1;
        let currentReps = 0;
        let isResting = false;
        let isPaused = false;
        let exerciseTime = 0;
        let restTime = 30;
        let selectedPainLevel = 0;
        let selectedFatigueLevel = 6;
        
        const exercises = [
            {
                name: 'å¤§è…¿å››é ­ç­‹ã‚»ãƒƒãƒ†ã‚£ãƒ³ã‚°',
                description: 'è†ã‚’ä¼¸ã°ã—ãŸçŠ¶æ…‹ã§å¤ªã‚‚ã‚‚ã®å‰ã®ç­‹è‚‰ã‚’åç¸®',
                category: 'ç­‹åŠ›ç¶­æŒ',
                sets: 3,
                reps: 15,
                aiAnalysis: false,
                restTime: 30
            },
            {
                name: 'ç«‹ã¡ä¸ŠãŒã‚Šç·´ç¿’',
                description: 'æ¤…å­ã‹ã‚‰ã®ç«‹ã¡ä¸ŠãŒã‚Šå‹•ä½œã®ç·´ç¿’',
                category: 'åŸºæœ¬å‹•ä½œè¨“ç·´',
                sets: 3,
                reps: 10,
                aiAnalysis: false,
                restTime: 60
            },
            {
                name: 'ãƒŸãƒ‹ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ',
                description: 'è†å±ˆæ›²30åº¦ã¾ã§ã®æµ…ã„ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ',
                category: 'ç­‹åŠ›å¼·åŒ–',
                sets: 3,
                reps: 10,
                aiAnalysis: true,
                restTime: 60
            }
        ];

        let exerciseTimer, restTimer;

        function updateDisplay() {
            const exercise = exercises[currentExerciseIndex];
            
            // é‹å‹•æƒ…å ±æ›´æ–°
            document.getElementById('exercise-name').textContent = exercise.name;
            document.getElementById('exercise-description').textContent = exercise.description;
            document.getElementById('exercise-category').textContent = exercise.category;
            document.getElementById('ai-chip').classList.toggle('hidden', !exercise.aiAnalysis);
            
            // ã‚»ãƒƒãƒˆãƒ»ãƒ¬ãƒƒãƒ—æƒ…å ±æ›´æ–°
            document.getElementById('current-set').textContent = currentSet;
            document.getElementById('total-sets').textContent = exercise.sets;
            document.getElementById('current-reps').textContent = currentReps;
            document.getElementById('total-reps').textContent = exercise.reps;
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹æ›´æ–°
            const sessionProgress = ((currentExerciseIndex + (currentSet - 1) / exercise.sets) / exercises.length) * 100;
            document.getElementById('session-progress').style.width = sessionProgress + '%';
            document.getElementById('progress-text').textContent = `${currentExerciseIndex + 1} / ${exercises.length} é‹å‹•å®Œäº†`;
            
            const repProgress = (currentReps / exercise.reps) * 100;
            document.getElementById('rep-progress').style.width = repProgress + '%';
            
            // ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°
            const nextBtn = document.getElementById('next-btn');
            if (currentReps < exercise.reps) {
                nextBtn.textContent = 'æ¬¡ã®å›æ•°';
            } else {
                nextBtn.textContent = 'ã‚»ãƒƒãƒˆå®Œäº†';
            }
        }

        function nextRep() {
            if (isPaused) return;
            
            const exercise = exercises[currentExerciseIndex];
            
            if (currentReps < exercise.reps) {
                currentReps++;
            } else {
                // ã‚»ãƒƒãƒˆå®Œäº†
                if (currentSet < exercise.sets) {
                    // æ¬¡ã®ã‚»ãƒƒãƒˆã¸
                    currentSet++;
                    currentReps = 0;
                    startRest(exercise.restTime);
                } else {
                    // é‹å‹•å®Œäº†
                    completeExercise();
                }
            }
            
            updateDisplay();
        }

        function completeExercise() {
            if (currentExerciseIndex < exercises.length - 1) {
                // æ¬¡ã®é‹å‹•ã¸
                currentExerciseIndex++;
                currentSet = 1;
                currentReps = 0;
                exerciseTime = 0;
                updateDisplay();
            } else {
                // å…¨é‹å‹•å®Œäº†
                showCompletionModal();
            }
        }

        function startRest(seconds) {
            isResting = true;
            restTime = seconds;
            document.getElementById('set-display').classList.add('hidden');
            document.getElementById('rest-display').classList.remove('hidden');
            
            restTimer = setInterval(() => {
                restTime--;
                document.getElementById('rest-time').textContent = formatTime(restTime);
                
                if (restTime <= 0) {
                    endRest();
                }
            }, 1000);
        }

        function endRest() {
            isResting = false;
            clearInterval(restTimer);
            document.getElementById('rest-display').classList.add('hidden');
            document.getElementById('set-display').classList.remove('hidden');
        }

        function skipRest() {
            endRest();
        }

        function togglePause() {
            isPaused = !isPaused;
            const pauseBtn = document.getElementById('pause-btn');
            const nextBtn = document.getElementById('next-btn');
            
            if (isPaused) {
                pauseBtn.textContent = 'å†é–‹';
                nextBtn.disabled = true;
                clearInterval(exerciseTimer);
            } else {
                pauseBtn.textContent = 'ä¸€æ™‚åœæ­¢';
                nextBtn.disabled = false;
                startExerciseTimer();
            }
        }

        function startExerciseTimer() {
            exerciseTimer = setInterval(() => {
                if (!isPaused && !isResting) {
                    exerciseTime++;
                    document.getElementById('exercise-timer').textContent = formatTime(exerciseTime);
                }
            }, 1000);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function showCompletionModal() {
            // ç—›ã¿ãƒ¬ãƒ™ãƒ«ãƒœã‚¿ãƒ³ç”Ÿæˆ
            const painRating = document.getElementById('pain-rating');
            painRating.innerHTML = '';
            for (let i = 0; i <= 10; i++) {
                const btn = document.createElement('button');
                btn.className = 'rating-btn';
                btn.textContent = i;
                btn.onclick = () => selectPainLevel(i);
                if (i === selectedPainLevel) btn.classList.add('active');
                painRating.appendChild(btn);
            }
            
            // ç–²åŠ´åº¦ãƒœã‚¿ãƒ³ç”Ÿæˆ
            const fatigueRating = document.getElementById('fatigue-rating');
            fatigueRating.innerHTML = '';
            [6, 8, 10, 12, 14, 16, 18, 20].forEach(level => {
                const btn = document.createElement('button');
                btn.className = 'rating-btn';
                btn.textContent = level;
                btn.onclick = () => selectFatigueLevel(level);
                if (level === selectedFatigueLevel) btn.classList.add('active');
                fatigueRating.appendChild(btn);
            });
            
            document.getElementById('completion-modal').classList.add('show');
        }

        function hideCompletionModal() {
            document.getElementById('completion-modal').classList.remove('show');
        }

        function selectPainLevel(level) {
            selectedPainLevel = level;
            document.querySelectorAll('#pain-rating .rating-btn').forEach((btn, index) => {
                btn.classList.toggle('active', index === level);
            });
        }

        function selectFatigueLevel(level) {
            selectedFatigueLevel = level;
            document.querySelectorAll('#fatigue-rating .rating-btn').forEach(btn => {
                btn.classList.toggle('active', parseInt(btn.textContent) === level);
            });
        }

        function completeSession() {
            alert(`ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†ï¼\n\nç—›ã¿ãƒ¬ãƒ™ãƒ«: ${selectedPainLevel}/10\nç–²åŠ´åº¦: ${selectedFatigueLevel}/20\n\nãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼`);
            hideCompletionModal();
            
            // ãƒªã‚»ãƒƒãƒˆ
            currentExerciseIndex = 0;
            currentSet = 1;
            currentReps = 0;
            exerciseTime = 0;
            updateDisplay();
        }

        // åˆæœŸåŒ–
        updateDisplay();
        startExerciseTimer();
    </script>
</body>
</html>