{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function _callSuper(t,o,e){return o=_getPrototypeOf(o),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e));}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t;})();}import React from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Alert from\"react-native-web/dist/exports/Alert\";import{Button}from'react-native-paper';import PropTypes from'prop-types';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var ErrorBoundary=function(_React$Component){function ErrorBoundary(props){var _this;_classCallCheck(this,ErrorBoundary);_this=_callSuper(this,ErrorBoundary,[props]);_this.handleRetry=function(){_this.setState({hasError:false,error:null,errorInfo:null});};_this.handleReportError=function(){var _this$state$error,_this$state$error2;var errorMessage=((_this$state$error=_this.state.error)==null?void 0:_this$state$error.message)||'Unknown error';var errorStack=((_this$state$error2=_this.state.error)==null?void 0:_this$state$error2.stack)||'';Alert.alert('エラーレポート',`以下のエラー情報をサポートに報告できます：\\n\\n${errorMessage}`,[{text:'キャンセル',style:'cancel'},{text:'レポート送信',onPress:function onPress(){Alert.alert('送信完了','エラーレポートを送信しました。');}}]);};_this.state={hasError:false,error:null,errorInfo:null};return _this;}_inherits(ErrorBoundary,_React$Component);return _createClass(ErrorBoundary,[{key:\"componentDidCatch\",value:function componentDidCatch(error,errorInfo){this.setState({error:error,errorInfo:errorInfo});if(false){console.error('ErrorBoundary caught an error:',error,errorInfo);}}},{key:\"render\",value:function render(){if(this.state.hasError){return _jsx(View,{style:styles.container,children:_jsxs(View,{style:styles.errorContainer,children:[_jsx(Text,{style:styles.title,children:\"\\u554F\\u984C\\u304C\\u767A\\u751F\\u3057\\u307E\\u3057\\u305F\"}),_jsx(Text,{style:styles.message,children:\"\\u30A2\\u30D7\\u30EA\\u3067\\u4E88\\u671F\\u3057\\u306A\\u3044\\u30A8\\u30E9\\u30FC\\u304C\\u767A\\u751F\\u3057\\u307E\\u3057\\u305F\\u3002 \\u4E0B\\u8A18\\u306E\\u30DC\\u30BF\\u30F3\\u3092\\u304A\\u8A66\\u3057\\u304F\\u3060\\u3055\\u3044\\u3002\"}),false&&this.state.error&&_jsxs(View,{style:styles.debugContainer,children:[_jsx(Text,{style:styles.debugTitle,children:\"\\u958B\\u767A\\u8005\\u60C5\\u5831:\"}),_jsx(Text,{style:styles.debugText,children:this.state.error.toString()}),this.state.errorInfo&&_jsx(Text,{style:styles.debugText,children:this.state.errorInfo.componentStack})]}),_jsxs(View,{style:styles.buttonContainer,children:[_jsx(Button,{mode:\"contained\",onPress:this.handleRetry,style:styles.button,children:\"\\u3082\\u3046\\u4E00\\u5EA6\\u8A66\\u3059\"}),_jsx(Button,{mode:\"outlined\",onPress:this.handleReportError,style:styles.button,children:\"\\u30A8\\u30E9\\u30FC\\u3092\\u5831\\u544A\"}),this.props.onReset&&_jsx(Button,{mode:\"text\",onPress:this.props.onReset,style:styles.button,children:\"\\u30DB\\u30FC\\u30E0\\u306B\\u623B\\u308B\"})]})]})});}return this.props.children;}}],[{key:\"getDerivedStateFromError\",value:function getDerivedStateFromError(error){return{hasError:true};}}]);}(React.Component);ErrorBoundary.propTypes={children:PropTypes.node.isRequired,onReset:PropTypes.func};var styles=StyleSheet.create({container:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:'#f5f5f5',padding:20},errorContainer:{backgroundColor:'#fff',padding:24,borderRadius:12,width:'100%',maxWidth:400,alignItems:'center',shadowColor:'#000',shadowOffset:{width:0,height:2},shadowOpacity:0.25,shadowRadius:3.84,elevation:5},title:{fontSize:24,fontWeight:'bold',color:'#d32f2f',marginBottom:16,textAlign:'center'},message:{fontSize:16,color:'#333',textAlign:'center',marginBottom:24,lineHeight:24},buttonContainer:{width:'100%',gap:12},button:{marginVertical:4},debugContainer:{backgroundColor:'#f5f5f5',padding:12,borderRadius:8,marginBottom:20,width:'100%'},debugTitle:{fontSize:14,fontWeight:'bold',color:'#666',marginBottom:8},debugText:{fontSize:12,color:'#666',fontFamily:'monospace'}});export default ErrorBoundary;","map":{"version":3,"names":["React","View","Text","StyleSheet","TouchableOpacity","Alert","Button","PropTypes","jsx","_jsx","jsxs","_jsxs","ErrorBoundary","_React$Component","props","_this","_classCallCheck","_callSuper","handleRetry","setState","hasError","error","errorInfo","handleReportError","_this$state$error","_this$state$error2","errorMessage","state","message","errorStack","stack","alert","text","style","onPress","_inherits","_createClass","key","value","componentDidCatch","console","render","styles","container","children","errorContainer","title","debugContainer","debugTitle","debugText","toString","componentStack","buttonContainer","mode","button","onReset","getDerivedStateFromError","Component","propTypes","node","isRequired","func","create","flex","justifyContent","alignItems","backgroundColor","padding","borderRadius","width","maxWidth","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","fontSize","fontWeight","color","marginBottom","textAlign","lineHeight","gap","marginVertical","fontFamily"],"sources":["/Users/shota/Desktop/文献検索/acl-rehab-app/mobile/src/components/ErrorBoundary.js"],"sourcesContent":["import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Alert } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport PropTypes from 'prop-types';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // エラーが発生したときに state を更新し、フォールバック UI を表示\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // エラーログを記録\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n\n    // 開発環境でのみ詳細なエラー情報を表示\n    if (__DEV__) {\n      console.error('ErrorBoundary caught an error:', error, errorInfo);\n    }\n\n    // 本番環境では適切なエラー追跡サービスに送信\n    // 例: Sentry, Crashlytics など\n    // ErrorTracker.logError(error, errorInfo);\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: null, errorInfo: null });\n  };\n\n  handleReportError = () => {\n    const errorMessage = this.state.error?.message || 'Unknown error';\n    const errorStack = this.state.error?.stack || '';\n    \n    Alert.alert(\n      'エラーレポート',\n      `以下のエラー情報をサポートに報告できます：\\n\\n${errorMessage}`,\n      [\n        { text: 'キャンセル', style: 'cancel' },\n        { \n          text: 'レポート送信', \n          onPress: () => {\n            // ここで実際のエラーレポート送信処理を実装\n            Alert.alert('送信完了', 'エラーレポートを送信しました。');\n          }\n        }\n      ]\n    );\n  };\n\n  render() {\n    if (this.state.hasError) {\n      // カスタムフォールバック UI\n      return (\n        <View style={styles.container}>\n          <View style={styles.errorContainer}>\n            <Text style={styles.title}>問題が発生しました</Text>\n            <Text style={styles.message}>\n              アプリで予期しないエラーが発生しました。\n              下記のボタンをお試しください。\n            </Text>\n            \n            {__DEV__ && this.state.error && (\n              <View style={styles.debugContainer}>\n                <Text style={styles.debugTitle}>開発者情報:</Text>\n                <Text style={styles.debugText}>{this.state.error.toString()}</Text>\n                {this.state.errorInfo && (\n                  <Text style={styles.debugText}>{this.state.errorInfo.componentStack}</Text>\n                )}\n              </View>\n            )}\n            \n            <View style={styles.buttonContainer}>\n              <Button \n                mode=\"contained\" \n                onPress={this.handleRetry}\n                style={styles.button}\n              >\n                もう一度試す\n              </Button>\n              \n              <Button \n                mode=\"outlined\" \n                onPress={this.handleReportError}\n                style={styles.button}\n              >\n                エラーを報告\n              </Button>\n              \n              {this.props.onReset && (\n                <Button \n                  mode=\"text\" \n                  onPress={this.props.onReset}\n                  style={styles.button}\n                >\n                  ホームに戻る\n                </Button>\n              )}\n            </View>\n          </View>\n        </View>\n      );\n    }\n\n    // エラーがない場合は通常の子コンポーネントを表示\n    return this.props.children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  onReset: PropTypes.func, // ホーム画面に戻るなどのリセット処理\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 20,\n  },\n  errorContainer: {\n    backgroundColor: '#fff',\n    padding: 24,\n    borderRadius: 12,\n    width: '100%',\n    maxWidth: 400,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#d32f2f',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  message: {\n    fontSize: 16,\n    color: '#333',\n    textAlign: 'center',\n    marginBottom: 24,\n    lineHeight: 24,\n  },\n  buttonContainer: {\n    width: '100%',\n    gap: 12,\n  },\n  button: {\n    marginVertical: 4,\n  },\n  debugContainer: {\n    backgroundColor: '#f5f5f5',\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 20,\n    width: '100%',\n  },\n  debugTitle: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    color: '#666',\n    marginBottom: 8,\n  },\n  debugText: {\n    fontSize: 12,\n    color: '#666',\n    fontFamily: 'monospace',\n  },\n});\n\nexport default ErrorBoundary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}