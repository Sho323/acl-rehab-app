{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}var AIAnalysisService=function(){function AIAnalysisService(){_classCallCheck(this,AIAnalysisService);this.model=null;this.isInitialized=false;this.analysisResults=[];}return _createClass(AIAnalysisService,[{key:\"initializeModel\",value:function(){var _initializeModel=_asyncToGenerator(function*(){try{false&&console.log('AI分析モデルを初期化中...');yield tf.ready();this.model=yield this.createDummyModel();this.isInitialized=true;false&&console.log('AI分析モデルの初期化が完了しました');return true;}catch(error){false&&console.error('AI分析モデルの初期化に失敗:',error);return false;}});function initializeModel(){return _initializeModel.apply(this,arguments);}return initializeModel;}()},{key:\"createDummyModel\",value:function(){var _createDummyModel=_asyncToGenerator(function*(){var model=tf.sequential({layers:[tf.layers.dense({inputShape:[68],units:128,activation:'relu'}),tf.layers.dropout({rate:0.2}),tf.layers.dense({units:64,activation:'relu'}),tf.layers.dense({units:32,activation:'relu'}),tf.layers.dense({units:1,activation:'sigmoid'})]});model.compile({optimizer:'adam',loss:'binaryCrossentropy',metrics:['accuracy']});return model;});function createDummyModel(){return _createDummyModel.apply(this,arguments);}return createDummyModel;}()},{key:\"analyzeFrame\",value:function(){var _analyzeFrame=_asyncToGenerator(function*(keypoints){var exerciseType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'squat';if(!this.isInitialized||!this.model){return this.getDummyAnalysisResult(exerciseType);}try{var normalizedKeypoints=this.preprocessKeypoints(keypoints);var inputTensor=tf.tensor2d([normalizedKeypoints],[1,68]);var prediction=yield this.model.predict(inputTensor);var score=yield prediction.data();inputTensor.dispose();prediction.dispose();var analysisResult=this.interpretResults(score[0],exerciseType,keypoints);this.analysisResults.push(_objectSpread({timestamp:Date.now(),exerciseType:exerciseType},analysisResult));return analysisResult;}catch(error){false&&console.error('フレーム分析エラー:',error);return this.getDummyAnalysisResult(exerciseType);}});function analyzeFrame(_x){return _analyzeFrame.apply(this,arguments);}return analyzeFrame;}()},{key:\"preprocessKeypoints\",value:function preprocessKeypoints(keypoints){if(!keypoints||keypoints.length===0){return new Array(68).fill(0);}var normalized=[];var keyJoints=[0,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22];var leftHip=keypoints[11]||{x:0,y:0};var rightHip=keypoints[12]||{x:0,y:0};var hipCenter={x:(leftHip.x+rightHip.x)/2,y:(leftHip.y+rightHip.y)/2};for(var i=0;i<34;i++){var keypoint=keypoints[i];if(keypoint&&keypoint.score>0.5){normalized.push((keypoint.x-hipCenter.x)/100);normalized.push((keypoint.y-hipCenter.y)/100);}else{normalized.push(0);normalized.push(0);}}return normalized;}},{key:\"interpretResults\",value:function interpretResults(score,exerciseType,keypoints){var kneeInToeOutScore=score;var detailedAnalysis=this.analyzeKneeAlignment(keypoints);var overallScore=this.calculateOverallScore(kneeInToeOutScore,detailedAnalysis);var feedback=this.generateFeedback(overallScore,detailedAnalysis,exerciseType);return{kneeInToeOutScore:Math.round(kneeInToeOutScore*100),overallScore:Math.round(overallScore*100),alignment:detailedAnalysis,feedback:feedback,timestamp:Date.now(),exerciseType:exerciseType};}},{key:\"analyzeKneeAlignment\",value:function analyzeKneeAlignment(keypoints){if(!keypoints||keypoints.length<23){return{leftKneeAlignment:'unknown',rightKneeAlignment:'unknown',kneeWidth:0,ankleWidth:0,kneeAnkleRatio:1};}var leftKnee=keypoints[13];var rightKnee=keypoints[14];var leftAnkle=keypoints[15];var rightAnkle=keypoints[16];if(!leftKnee||!rightKnee||!leftAnkle||!rightAnkle){return{leftKneeAlignment:'unknown',rightKneeAlignment:'unknown',kneeWidth:0,ankleWidth:0,kneeAnkleRatio:1};}var kneeWidth=Math.abs(rightKnee.x-leftKnee.x);var ankleWidth=Math.abs(rightAnkle.x-leftAnkle.x);var kneeAnkleRatio=kneeWidth/ankleWidth;var leftKneeAlignment=this.evaluateKneePosition(leftKnee,leftAnkle,'left');var rightKneeAlignment=this.evaluateKneePosition(rightKnee,rightAnkle,'right');return{leftKneeAlignment:leftKneeAlignment,rightKneeAlignment:rightKneeAlignment,kneeWidth:kneeWidth,ankleWidth:ankleWidth,kneeAnkleRatio:Math.round(kneeAnkleRatio*100)/100};}},{key:\"evaluateKneePosition\",value:function evaluateKneePosition(knee,ankle,side){if(!knee||!ankle)return'unknown';var horizontalDiff=Math.abs(knee.x-ankle.x);var threshold=20;if(horizontalDiff<threshold){return'good';}else if(horizontalDiff<threshold*2){return'moderate';}else{return'poor';}}},{key:\"calculateOverallScore\",value:function calculateOverallScore(kneeInToeOutScore,alignment){var score=(1-kneeInToeOutScore)*0.6;var leftAlignmentScore=this.getAlignmentScore(alignment.leftKneeAlignment);var rightAlignmentScore=this.getAlignmentScore(alignment.rightKneeAlignment);var alignmentScore=(leftAlignmentScore+rightAlignmentScore)/2;score+=alignmentScore*0.3;var ratioScore=this.getRatioScore(alignment.kneeAnkleRatio);score+=ratioScore*0.1;return Math.max(0,Math.min(1,score));}},{key:\"getAlignmentScore\",value:function getAlignmentScore(alignment){switch(alignment){case'good':return 1.0;case'moderate':return 0.6;case'poor':return 0.2;default:return 0.5;}}},{key:\"getRatioScore\",value:function getRatioScore(ratio){if(ratio>=0.8&&ratio<=1.2)return 1.0;if(ratio>=0.6&&ratio<=1.4)return 0.7;return 0.3;}},{key:\"generateFeedback\",value:function generateFeedback(overallScore,alignment,exerciseType){var feedback={level:'good',message:'',suggestions:[]};if(overallScore>=0.8){feedback.level='good';feedback.message='素晴らしいフォームです！この調子で続けましょう。';feedback.suggestions=['現在のフォームを維持してください'];}else if(overallScore>=0.6){feedback.level='moderate';feedback.message='概ね良好ですが、改善の余地があります。';feedback.suggestions=this.getModerateAdvice(alignment,exerciseType);}else{feedback.level='poor';feedback.message='フォームに問題があります。安全のため注意してください。';feedback.suggestions=this.getPoorAdvice(alignment,exerciseType);}return feedback;}},{key:\"getModerateAdvice\",value:function getModerateAdvice(alignment,exerciseType){var advice=[];if(alignment.kneeAnkleRatio>1.2){advice.push('膝が外側に開きすぎています。つま先の方向を意識しましょう');}else if(alignment.kneeAnkleRatio<0.8){advice.push('膝が内側に入りすぎています。膝をつま先の方向に向けましょう');}if(alignment.leftKneeAlignment==='moderate'||alignment.rightKneeAlignment==='moderate'){advice.push('膝の位置をつま先の真上に保ちましょう');}if(exerciseType==='squat'){advice.push('スクワット時は膝とつま先を同じ向きにしてください');}return advice.length>0?advice:['フォームを少し調整してみましょう'];}},{key:\"getPoorAdvice\",value:function getPoorAdvice(alignment,exerciseType){var advice=[];if(alignment.kneeAnkleRatio>1.4){advice.push('膝が大きく外側に開いています。怪我の危険があります');advice.push('つま先の向きと膝の向きを揃えてください');}else if(alignment.kneeAnkleRatio<0.6){advice.push('膝が内側に大きく入っています（knee-in）');advice.push('膝をつま先の方向に向けて、股関節から動かしましょう');}if(alignment.leftKneeAlignment==='poor'){advice.push('左膝の位置を修正してください');}if(alignment.rightKneeAlignment==='poor'){advice.push('右膝の位置を修正してください');}advice.push('動作をゆっくり行い、正しいフォームを意識してください');return advice;}},{key:\"getDummyAnalysisResult\",value:function getDummyAnalysisResult(exerciseType){var scenarios=[{kneeInToeOutScore:15,overallScore:85,alignment:{leftKneeAlignment:'good',rightKneeAlignment:'good',kneeWidth:45,ankleWidth:48,kneeAnkleRatio:0.94},feedback:{level:'good',message:'素晴らしいフォームです！この調子で続けましょう。',suggestions:['現在のフォームを維持してください']}},{kneeInToeOutScore:35,overallScore:65,alignment:{leftKneeAlignment:'moderate',rightKneeAlignment:'good',kneeWidth:35,ankleWidth:45,kneeAnkleRatio:0.78},feedback:{level:'moderate',message:'概ね良好ですが、改善の余地があります。',suggestions:['左膝の位置をつま先の真上に保ちましょう','膝が内側に入りすぎています。膝をつま先の方向に向けましょう']}},{kneeInToeOutScore:60,overallScore:40,alignment:{leftKneeAlignment:'poor',rightKneeAlignment:'moderate',kneeWidth:28,ankleWidth:48,kneeAnkleRatio:0.58},feedback:{level:'poor',message:'フォームに問題があります。安全のため注意してください。',suggestions:['膝が内側に大きく入っています（knee-in）','膝をつま先の方向に向けて、股関節から動かしましょう','左膝の位置を修正してください','動作をゆっくり行い、正しいフォームを意識してください']}}];var randomIndex=Math.floor(Math.random()*scenarios.length);var result=scenarios[randomIndex];return _objectSpread(_objectSpread({},result),{},{timestamp:Date.now(),exerciseType:exerciseType,isDummy:true});}},{key:\"getSessionSummary\",value:function getSessionSummary(){if(this.analysisResults.length===0){return{totalFrames:0,averageScore:0,issueCount:0,improvements:[]};}var totalFrames=this.analysisResults.length;var averageScore=this.analysisResults.reduce(function(sum,result){return sum+result.overallScore;},0)/totalFrames;var issueCount=this.analysisResults.filter(function(result){return result.overallScore<60;}).length;var improvements=this.generateSessionImprovements();return{totalFrames:totalFrames,averageScore:Math.round(averageScore),issueCount:issueCount,improvements:improvements};}},{key:\"generateSessionImprovements\",value:function generateSessionImprovements(){var improvements=[];var poorResults=this.analysisResults.filter(function(result){return result.overallScore<60;});if(poorResults.length>this.analysisResults.length*0.3){improvements.push('フォームの基本を見直すことをお勧めします');}var kneeInIssues=this.analysisResults.filter(function(result){return result.kneeInToeOutScore>50;});if(kneeInIssues.length>0){improvements.push('膝が内側に入る傾向があります。股関節の動きを意識してください');}return improvements;}},{key:\"resetAnalysis\",value:function resetAnalysis(){this.analysisResults=[];}},{key:\"dispose\",value:function dispose(){if(this.model){this.model.dispose();this.model=null;}this.analysisResults=[];this.isInitialized=false;}}]);}();var aiAnalysisService=new AIAnalysisService();export default aiAnalysisService;","map":{"version":3,"names":["AIAnalysisService","_classCallCheck","model","isInitialized","analysisResults","_createClass","key","value","_initializeModel","_asyncToGenerator","console","log","tf","ready","createDummyModel","error","initializeModel","apply","arguments","_createDummyModel","sequential","layers","dense","inputShape","units","activation","dropout","rate","compile","optimizer","loss","metrics","_analyzeFrame","keypoints","exerciseType","length","undefined","getDummyAnalysisResult","normalizedKeypoints","preprocessKeypoints","inputTensor","tensor2d","prediction","predict","score","data","dispose","analysisResult","interpretResults","push","_objectSpread","timestamp","Date","now","analyzeFrame","_x","Array","fill","normalized","keyJoints","leftHip","x","y","rightHip","hipCenter","i","keypoint","kneeInToeOutScore","detailedAnalysis","analyzeKneeAlignment","overallScore","calculateOverallScore","feedback","generateFeedback","Math","round","alignment","leftKneeAlignment","rightKneeAlignment","kneeWidth","ankleWidth","kneeAnkleRatio","leftKnee","rightKnee","leftAnkle","rightAnkle","abs","evaluateKneePosition","knee","ankle","side","horizontalDiff","threshold","leftAlignmentScore","getAlignmentScore","rightAlignmentScore","alignmentScore","ratioScore","getRatioScore","max","min","ratio","level","message","suggestions","getModerateAdvice","getPoorAdvice","advice","scenarios","randomIndex","floor","random","result","isDummy","getSessionSummary","totalFrames","averageScore","issueCount","improvements","reduce","sum","filter","generateSessionImprovements","poorResults","kneeInIssues","resetAnalysis","aiAnalysisService"],"sources":["/Users/shota/Desktop/文献検索/acl-rehab-app/mobile/src/services/aiAnalysis.js"],"sourcesContent":["// import * as tf from '@tensorflow/tfjs';\n// import '@tensorflow/tfjs-react-native';\n\n// AI動作分析サービス\nclass AIAnalysisService {\n  constructor() {\n    this.model = null;\n    this.isInitialized = false;\n    this.analysisResults = [];\n  }\n\n  // モデル初期化\n  async initializeModel() {\n    try {\n      // 実際の環境では事前訓練されたモデルを読み込み\n      // この例ではダミーのモデル構造を示す\n      __DEV__ && console.log('AI分析モデルを初期化中...');\n      \n      // TensorFlow.js プラットフォーム設定\n      await tf.ready();\n      \n      // ダミーモデル（実際の実装では外部モデルファイルを読み込み）\n      this.model = await this.createDummyModel();\n      \n      this.isInitialized = true;\n      __DEV__ && console.log('AI分析モデルの初期化が完了しました');\n      \n      return true;\n    } catch (error) {\n      __DEV__ && console.error('AI分析モデルの初期化に失敗:', error);\n      return false;\n    }\n  }\n\n  // ダミーモデル作成（実際の実装では外部モデルを使用）\n  async createDummyModel() {\n    const model = tf.sequential({\n      layers: [\n        tf.layers.dense({ inputShape: [68], units: 128, activation: 'relu' }), // 34キーポイント × 2座標\n        tf.layers.dropout({ rate: 0.2 }),\n        tf.layers.dense({ units: 64, activation: 'relu' }),\n        tf.layers.dense({ units: 32, activation: 'relu' }),\n        tf.layers.dense({ units: 1, activation: 'sigmoid' }) // Knee-in-toe-out検出（0-1）\n      ]\n    });\n    \n    model.compile({\n      optimizer: 'adam',\n      loss: 'binaryCrossentropy',\n      metrics: ['accuracy']\n    });\n    \n    return model;\n  }\n\n  // フレーム分析\n  async analyzeFrame(keypoints, exerciseType = 'squat') {\n    if (!this.isInitialized || !this.model) {\n      return this.getDummyAnalysisResult(exerciseType);\n    }\n\n    try {\n      // キーポイント前処理\n      const normalizedKeypoints = this.preprocessKeypoints(keypoints);\n      \n      // テンソル作成\n      const inputTensor = tf.tensor2d([normalizedKeypoints], [1, 68]);\n      \n      // 推論実行\n      const prediction = await this.model.predict(inputTensor);\n      const score = await prediction.data();\n      \n      // リソース解放\n      inputTensor.dispose();\n      prediction.dispose();\n      \n      // 結果分析\n      const analysisResult = this.interpretResults(score[0], exerciseType, keypoints);\n      \n      // 結果履歴に追加\n      this.analysisResults.push({\n        timestamp: Date.now(),\n        exerciseType: exerciseType,\n        ...analysisResult\n      });\n      \n      return analysisResult;\n    } catch (error) {\n      __DEV__ && console.error('フレーム分析エラー:', error);\n      return this.getDummyAnalysisResult(exerciseType);\n    }\n  }\n\n  // キーポイント前処理\n  preprocessKeypoints(keypoints) {\n    if (!keypoints || keypoints.length === 0) {\n      return new Array(68).fill(0);\n    }\n\n    const normalized = [];\n    \n    // 主要な関節点のインデックス（COCO形式）\n    const keyJoints = [\n      0,  // nose\n      5,  // left_shoulder\n      6,  // right_shoulder\n      7,  // left_elbow\n      8,  // right_elbow\n      9,  // left_wrist\n      10, // right_wrist\n      11, // left_hip\n      12, // right_hip\n      13, // left_knee\n      14, // right_knee\n      15, // left_ankle\n      16, // right_ankle\n      17, // left_big_toe\n      18, // right_big_toe\n      19, // left_small_toe\n      20, // right_small_toe\n      21, // left_heel\n      22, // right_heel\n    ];\n\n    // 正規化：股関節の中点を基準とした相対座標\n    const leftHip = keypoints[11] || { x: 0, y: 0 };\n    const rightHip = keypoints[12] || { x: 0, y: 0 };\n    const hipCenter = {\n      x: (leftHip.x + rightHip.x) / 2,\n      y: (leftHip.y + rightHip.y) / 2\n    };\n\n    // 各関節の相対位置を計算\n    for (let i = 0; i < 34; i++) {\n      const keypoint = keypoints[i];\n      if (keypoint && keypoint.score > 0.5) {\n        normalized.push((keypoint.x - hipCenter.x) / 100); // X座標\n        normalized.push((keypoint.y - hipCenter.y) / 100); // Y座標\n      } else {\n        normalized.push(0);\n        normalized.push(0);\n      }\n    }\n\n    return normalized;\n  }\n\n  // 結果解釈\n  interpretResults(score, exerciseType, keypoints) {\n    const kneeInToeOutScore = score;\n    \n    // 膝とつま先の位置関係を詳細分析\n    const detailedAnalysis = this.analyzeKneeAlignment(keypoints);\n    \n    // 総合評価\n    const overallScore = this.calculateOverallScore(kneeInToeOutScore, detailedAnalysis);\n    \n    // フィードバック生成\n    const feedback = this.generateFeedback(overallScore, detailedAnalysis, exerciseType);\n    \n    return {\n      kneeInToeOutScore: Math.round(kneeInToeOutScore * 100),\n      overallScore: Math.round(overallScore * 100),\n      alignment: detailedAnalysis,\n      feedback: feedback,\n      timestamp: Date.now(),\n      exerciseType: exerciseType\n    };\n  }\n\n  // 膝の位置関係詳細分析\n  analyzeKneeAlignment(keypoints) {\n    if (!keypoints || keypoints.length < 23) {\n      return {\n        leftKneeAlignment: 'unknown',\n        rightKneeAlignment: 'unknown',\n        kneeWidth: 0,\n        ankleWidth: 0,\n        kneeAnkleRatio: 1\n      };\n    }\n\n    const leftKnee = keypoints[13];\n    const rightKnee = keypoints[14];\n    const leftAnkle = keypoints[15];\n    const rightAnkle = keypoints[16];\n\n    if (!leftKnee || !rightKnee || !leftAnkle || !rightAnkle) {\n      return {\n        leftKneeAlignment: 'unknown',\n        rightKneeAlignment: 'unknown',\n        kneeWidth: 0,\n        ankleWidth: 0,\n        kneeAnkleRatio: 1\n      };\n    }\n\n    // 膝と足首の幅を計算\n    const kneeWidth = Math.abs(rightKnee.x - leftKnee.x);\n    const ankleWidth = Math.abs(rightAnkle.x - leftAnkle.x);\n    const kneeAnkleRatio = kneeWidth / ankleWidth;\n\n    // 各膝の位置評価\n    const leftKneeAlignment = this.evaluateKneePosition(leftKnee, leftAnkle, 'left');\n    const rightKneeAlignment = this.evaluateKneePosition(rightKnee, rightAnkle, 'right');\n\n    return {\n      leftKneeAlignment,\n      rightKneeAlignment,\n      kneeWidth,\n      ankleWidth,\n      kneeAnkleRatio: Math.round(kneeAnkleRatio * 100) / 100\n    };\n  }\n\n  // 個別膝位置評価\n  evaluateKneePosition(knee, ankle, side) {\n    if (!knee || !ankle) return 'unknown';\n\n    const horizontalDiff = Math.abs(knee.x - ankle.x);\n    const threshold = 20; // ピクセル単位の閾値\n\n    if (horizontalDiff < threshold) {\n      return 'good';\n    } else if (horizontalDiff < threshold * 2) {\n      return 'moderate';\n    } else {\n      return 'poor';\n    }\n  }\n\n  // 総合スコア計算\n  calculateOverallScore(kneeInToeOutScore, alignment) {\n    let score = (1 - kneeInToeOutScore) * 0.6; // knee-in-toe-out問題がない場合は高スコア\n    \n    // 膝の位置関係を考慮\n    const leftAlignmentScore = this.getAlignmentScore(alignment.leftKneeAlignment);\n    const rightAlignmentScore = this.getAlignmentScore(alignment.rightKneeAlignment);\n    const alignmentScore = (leftAlignmentScore + rightAlignmentScore) / 2;\n    \n    score += alignmentScore * 0.3;\n    \n    // 膝と足首の幅比率を考慮\n    const ratioScore = this.getRatioScore(alignment.kneeAnkleRatio);\n    score += ratioScore * 0.1;\n    \n    return Math.max(0, Math.min(1, score));\n  }\n\n  // 位置関係スコア\n  getAlignmentScore(alignment) {\n    switch (alignment) {\n      case 'good': return 1.0;\n      case 'moderate': return 0.6;\n      case 'poor': return 0.2;\n      default: return 0.5;\n    }\n  }\n\n  // 比率スコア\n  getRatioScore(ratio) {\n    // 理想的な比率は0.8-1.2\n    if (ratio >= 0.8 && ratio <= 1.2) return 1.0;\n    if (ratio >= 0.6 && ratio <= 1.4) return 0.7;\n    return 0.3;\n  }\n\n  // フィードバック生成\n  generateFeedback(overallScore, alignment, exerciseType) {\n    const feedback = {\n      level: 'good',\n      message: '',\n      suggestions: []\n    };\n\n    if (overallScore >= 0.8) {\n      feedback.level = 'good';\n      feedback.message = '素晴らしいフォームです！この調子で続けましょう。';\n      feedback.suggestions = ['現在のフォームを維持してください'];\n    } else if (overallScore >= 0.6) {\n      feedback.level = 'moderate';\n      feedback.message = '概ね良好ですが、改善の余地があります。';\n      feedback.suggestions = this.getModerateAdvice(alignment, exerciseType);\n    } else {\n      feedback.level = 'poor';\n      feedback.message = 'フォームに問題があります。安全のため注意してください。';\n      feedback.suggestions = this.getPoorAdvice(alignment, exerciseType);\n    }\n\n    return feedback;\n  }\n\n  // 中程度の問題に対するアドバイス\n  getModerateAdvice(alignment, exerciseType) {\n    const advice = [];\n    \n    if (alignment.kneeAnkleRatio > 1.2) {\n      advice.push('膝が外側に開きすぎています。つま先の方向を意識しましょう');\n    } else if (alignment.kneeAnkleRatio < 0.8) {\n      advice.push('膝が内側に入りすぎています。膝をつま先の方向に向けましょう');\n    }\n    \n    if (alignment.leftKneeAlignment === 'moderate' || alignment.rightKneeAlignment === 'moderate') {\n      advice.push('膝の位置をつま先の真上に保ちましょう');\n    }\n    \n    if (exerciseType === 'squat') {\n      advice.push('スクワット時は膝とつま先を同じ向きにしてください');\n    }\n    \n    return advice.length > 0 ? advice : ['フォームを少し調整してみましょう'];\n  }\n\n  // 問題のあるフォームに対するアドバイス\n  getPoorAdvice(alignment, exerciseType) {\n    const advice = [];\n    \n    if (alignment.kneeAnkleRatio > 1.4) {\n      advice.push('膝が大きく外側に開いています。怪我の危険があります');\n      advice.push('つま先の向きと膝の向きを揃えてください');\n    } else if (alignment.kneeAnkleRatio < 0.6) {\n      advice.push('膝が内側に大きく入っています（knee-in）');\n      advice.push('膝をつま先の方向に向けて、股関節から動かしましょう');\n    }\n    \n    if (alignment.leftKneeAlignment === 'poor') {\n      advice.push('左膝の位置を修正してください');\n    }\n    \n    if (alignment.rightKneeAlignment === 'poor') {\n      advice.push('右膝の位置を修正してください');\n    }\n    \n    advice.push('動作をゆっくり行い、正しいフォームを意識してください');\n    \n    return advice;\n  }\n\n  // ダミー分析結果（モデル未初期化時）\n  getDummyAnalysisResult(exerciseType) {\n    // リアルなダミーデータを生成\n    const scenarios = [\n      {\n        kneeInToeOutScore: 15,\n        overallScore: 85,\n        alignment: {\n          leftKneeAlignment: 'good',\n          rightKneeAlignment: 'good',\n          kneeWidth: 45,\n          ankleWidth: 48,\n          kneeAnkleRatio: 0.94\n        },\n        feedback: {\n          level: 'good',\n          message: '素晴らしいフォームです！この調子で続けましょう。',\n          suggestions: ['現在のフォームを維持してください']\n        }\n      },\n      {\n        kneeInToeOutScore: 35,\n        overallScore: 65,\n        alignment: {\n          leftKneeAlignment: 'moderate',\n          rightKneeAlignment: 'good',\n          kneeWidth: 35,\n          ankleWidth: 45,\n          kneeAnkleRatio: 0.78\n        },\n        feedback: {\n          level: 'moderate',\n          message: '概ね良好ですが、改善の余地があります。',\n          suggestions: [\n            '左膝の位置をつま先の真上に保ちましょう',\n            '膝が内側に入りすぎています。膝をつま先の方向に向けましょう'\n          ]\n        }\n      },\n      {\n        kneeInToeOutScore: 60,\n        overallScore: 40,\n        alignment: {\n          leftKneeAlignment: 'poor',\n          rightKneeAlignment: 'moderate',\n          kneeWidth: 28,\n          ankleWidth: 48,\n          kneeAnkleRatio: 0.58\n        },\n        feedback: {\n          level: 'poor',\n          message: 'フォームに問題があります。安全のため注意してください。',\n          suggestions: [\n            '膝が内側に大きく入っています（knee-in）',\n            '膝をつま先の方向に向けて、股関節から動かしましょう',\n            '左膝の位置を修正してください',\n            '動作をゆっくり行い、正しいフォームを意識してください'\n          ]\n        }\n      }\n    ];\n    \n    // ランダムにシナリオを選択\n    const randomIndex = Math.floor(Math.random() * scenarios.length);\n    const result = scenarios[randomIndex];\n    \n    return {\n      ...result,\n      timestamp: Date.now(),\n      exerciseType: exerciseType,\n      isDummy: true\n    };\n  }\n\n  // セッション分析サマリー\n  getSessionSummary() {\n    if (this.analysisResults.length === 0) {\n      return {\n        totalFrames: 0,\n        averageScore: 0,\n        issueCount: 0,\n        improvements: []\n      };\n    }\n\n    const totalFrames = this.analysisResults.length;\n    const averageScore = this.analysisResults.reduce((sum, result) => sum + result.overallScore, 0) / totalFrames;\n    const issueCount = this.analysisResults.filter(result => result.overallScore < 60).length;\n    \n    const improvements = this.generateSessionImprovements();\n    \n    return {\n      totalFrames,\n      averageScore: Math.round(averageScore),\n      issueCount,\n      improvements\n    };\n  }\n\n  // セッション改善提案\n  generateSessionImprovements() {\n    const improvements = [];\n    const poorResults = this.analysisResults.filter(result => result.overallScore < 60);\n    \n    if (poorResults.length > this.analysisResults.length * 0.3) {\n      improvements.push('フォームの基本を見直すことをお勧めします');\n    }\n    \n    const kneeInIssues = this.analysisResults.filter(result => result.kneeInToeOutScore > 50);\n    if (kneeInIssues.length > 0) {\n      improvements.push('膝が内側に入る傾向があります。股関節の動きを意識してください');\n    }\n    \n    return improvements;\n  }\n\n  // 分析結果リセット\n  resetAnalysis() {\n    this.analysisResults = [];\n  }\n\n  // リソース解放\n  dispose() {\n    if (this.model) {\n      this.model.dispose();\n      this.model = null;\n    }\n    this.analysisResults = [];\n    this.isInitialized = false;\n  }\n}\n\n// シングルトンインスタンス\nconst aiAnalysisService = new AIAnalysisService();\n\nexport default aiAnalysisService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}