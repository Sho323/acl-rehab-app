{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Alert from\"react-native-web/dist/exports/Alert\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{Text,Card,Button,ActivityIndicator,Chip,Divider,IconButton}from'react-native-paper';import AIAnalysisDisplay from\"../components/AIAnalysisDisplay\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";var _Dimensions$get=Dimensions.get('window'),screenWidth=_Dimensions$get.width,screenHeight=_Dimensions$get.height;var AIAnalysisScreen=function AIAnalysisScreen(_ref){var _route$params,_route$params2;var navigation=_ref.navigation,route=_ref.route;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),hasPermission=_useState2[0],setHasPermission=_useState2[1];var _useState3=useState(Camera.Constants.Type.front),_useState4=_slicedToArray(_useState3,2),cameraType=_useState4[0],setCameraType=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isRecording=_useState6[0],setIsRecording=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAnalyzing=_useState8[0],setIsAnalyzing=_useState8[1];var _useState9=useState(null),_useState0=_slicedToArray(_useState9,2),currentAnalysis=_useState0[0],setCurrentAnalysis=_useState0[1];var _useState1=useState(null),_useState10=_slicedToArray(_useState1,2),sessionSummary=_useState10[0],setSessionSummary=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),analysisHistory=_useState12[0],setAnalysisHistory=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isInitialized=_useState14[0],setIsInitialized=_useState14[1];var cameraRef=useRef(null);var analysisIntervalRef=useRef(null);var exerciseType=((_route$params=route.params)==null?void 0:_route$params.exerciseType)||'squat';var exerciseName=((_route$params2=route.params)==null?void 0:_route$params2.exerciseName)||'AI動作分析';useEffect(function(){_asyncToGenerator(function*(){var cameraStatus=yield Camera.requestCameraPermissionsAsync();var mediaLibraryStatus=yield MediaLibrary.requestPermissionsAsync();setHasPermission(cameraStatus.status==='granted'&&mediaLibraryStatus.status==='granted');try{var initialized=yield aiAnalysisService.initializeModel();setIsInitialized(initialized);}catch(error){console.error('AI分析サービス初期化エラー:',error);setIsInitialized(false);}})();return function(){if(analysisIntervalRef.current){clearInterval(analysisIntervalRef.current);}};},[]);var startAnalysis=function(){var _ref3=_asyncToGenerator(function*(){if(!cameraRef.current||!isInitialized){Alert.alert('エラー','カメラまたはAI分析の準備ができていません。');return;}setIsRecording(true);setIsAnalyzing(true);aiAnalysisService.resetAnalysis();setAnalysisHistory([]);setCurrentAnalysis(null);analysisIntervalRef.current=setInterval(_asyncToGenerator(function*(){try{var dummyKeypoints=generateDummyKeypoints();var result=yield aiAnalysisService.analyzeFrame(dummyKeypoints,exerciseType);setCurrentAnalysis(result);setAnalysisHistory(function(prev){return[].concat(_toConsumableArray(prev),[result]).slice(-10);});}catch(error){console.error('フレーム分析エラー:',error);}}),2000);});return function startAnalysis(){return _ref3.apply(this,arguments);};}();var stopAnalysis=function stopAnalysis(){setIsRecording(false);setIsAnalyzing(false);if(analysisIntervalRef.current){clearInterval(analysisIntervalRef.current);analysisIntervalRef.current=null;}var summary=aiAnalysisService.getSessionSummary();setSessionSummary(summary);Alert.alert('AI分析完了',`分析フレーム数: ${summary.totalFrames}\\n平均スコア: ${summary.averageScore}点\\n問題検出: ${summary.issueCount}回`,[{text:'確認',onPress:function onPress(){}}]);};var toggleCameraType=function toggleCameraType(){setCameraType(cameraType===Camera.Constants.Type.back?Camera.Constants.Type.front:Camera.Constants.Type.back);};var retryAnalysis=function retryAnalysis(){setCurrentAnalysis(null);setSessionSummary(null);setAnalysisHistory([]);aiAnalysisService.resetAnalysis();};var generateDummyKeypoints=function generateDummyKeypoints(){var keypoints=[];var baseX=screenWidth/2;var baseY=screenHeight/2;for(var i=0;i<17;i++){keypoints.push({x:baseX+(Math.random()-0.5)*100,y:baseY+(Math.random()-0.5)*200,score:0.8+Math.random()*0.2});}return keypoints;};if(hasPermission===null){return _jsxs(View,{style:styles.loadingContainer,children:[_jsx(ActivityIndicator,{size:\"large\"}),_jsx(Text,{style:styles.loadingText,children:\"\\u30AB\\u30E1\\u30E9\\u306E\\u6E96\\u5099\\u4E2D...\"})]});}if(hasPermission===false){return _jsxs(View,{style:styles.errorContainer,children:[_jsx(Text,{style:styles.errorText,children:\"\\u30AB\\u30E1\\u30E9\\u3078\\u306E\\u30A2\\u30AF\\u30BB\\u30B9\\u304C\\u5FC5\\u8981\\u3067\\u3059\"}),_jsx(Button,{mode:\"contained\",onPress:function onPress(){return navigation.goBack();},children:\"\\u623B\\u308B\"})]});}return _jsxs(View,{style:styles.container,children:[_jsx(View,{style:styles.cameraContainer,children:_jsx(Camera,{ref:cameraRef,style:styles.camera,type:cameraType,ratio:\"16:9\",children:_jsxs(View,{style:styles.cameraOverlay,children:[_jsxs(View,{style:styles.cameraHeader,children:[_jsx(View,{style:styles.exerciseInfo,children:_jsx(Chip,{mode:\"outlined\",style:styles.exerciseChip,textStyle:styles.exerciseChipText,children:exerciseName})}),_jsx(IconButton,{icon:\"camera-flip\",size:24,iconColor:\"#fff\",onPress:toggleCameraType,style:styles.flipButton})]}),isRecording&&_jsxs(View,{style:styles.recordingIndicator,children:[_jsx(View,{style:styles.recordingDot}),_jsx(Text,{style:styles.recordingText,children:\"AI\\u5206\\u6790\\u4E2D\"})]}),_jsx(View,{style:styles.cameraControls,children:!isRecording?_jsx(Button,{mode:\"contained\",onPress:startAnalysis,style:styles.startButton,disabled:!isInitialized,children:\"\\u5206\\u6790\\u958B\\u59CB\"}):_jsx(Button,{mode:\"contained\",onPress:stopAnalysis,style:styles.stopButton,buttonColor:\"#F44336\",children:\"\\u5206\\u6790\\u505C\\u6B62\"})})]})})}),_jsxs(ScrollView,{style:styles.analysisContainer,children:[(currentAnalysis||isAnalyzing)&&_jsx(AIAnalysisDisplay,{analysisResult:currentAnalysis,isAnalyzing:isAnalyzing&&!currentAnalysis,style:styles.currentAnalysis}),sessionSummary&&_jsx(Card,{style:styles.summaryCard,children:_jsxs(Card.Content,{children:[_jsx(Text,{style:styles.summaryTitle,children:\"\\u30BB\\u30C3\\u30B7\\u30E7\\u30F3\\u5206\\u6790\\u7D50\\u679C\"}),_jsxs(View,{style:styles.summaryStats,children:[_jsxs(View,{style:styles.statItem,children:[_jsx(Text,{style:styles.statValue,children:sessionSummary.totalFrames}),_jsx(Text,{style:styles.statLabel,children:\"\\u5206\\u6790\\u30D5\\u30EC\\u30FC\\u30E0\"})]}),_jsxs(View,{style:styles.statItem,children:[_jsx(Text,{style:[styles.statValue,{color:getScoreColor(sessionSummary.averageScore)}],children:sessionSummary.averageScore}),_jsx(Text,{style:styles.statLabel,children:\"\\u5E73\\u5747\\u30B9\\u30B3\\u30A2\"})]}),_jsxs(View,{style:styles.statItem,children:[_jsx(Text,{style:[styles.statValue,{color:sessionSummary.issueCount>0?'#F44336':'#4CAF50'}],children:sessionSummary.issueCount}),_jsx(Text,{style:styles.statLabel,children:\"\\u554F\\u984C\\u691C\\u51FA\"})]})]}),sessionSummary.improvements.length>0&&_jsxs(View,{style:styles.improvementsSection,children:[_jsx(Text,{style:styles.improvementsTitle,children:\"\\u6539\\u5584\\u63D0\\u6848\"}),sessionSummary.improvements.map(function(improvement,index){return _jsxs(Text,{style:styles.improvementText,children:[\"\\u2022 \",improvement]},index);})]}),_jsxs(View,{style:styles.summaryActions,children:[_jsx(Button,{mode:\"outlined\",onPress:retryAnalysis,style:styles.retryButton,children:\"\\u518D\\u5206\\u6790\"}),_jsx(Button,{mode:\"contained\",onPress:function onPress(){return navigation.goBack();},style:styles.completeButton,children:\"\\u5B8C\\u4E86\"})]})]})}),analysisHistory.length>0&&!sessionSummary&&_jsx(Card,{style:styles.historyCard,children:_jsxs(Card.Content,{children:[_jsx(Text,{style:styles.historyTitle,children:\"\\u5206\\u6790\\u5C65\\u6B74\"}),_jsx(Divider,{style:styles.historyDivider}),analysisHistory.slice(-3).map(function(analysis,index){return _jsxs(View,{style:styles.historyItem,children:[_jsxs(View,{style:styles.historyHeader,children:[_jsx(Text,{style:styles.historyTime,children:new Date(analysis.timestamp).toLocaleTimeString('ja-JP')}),_jsxs(Chip,{mode:\"outlined\",compact:true,style:[styles.historyChip,{borderColor:getScoreColor(analysis.overallScore)}],textStyle:{color:getScoreColor(analysis.overallScore)},children:[analysis.overallScore,\"\\u70B9\"]})]}),_jsx(Text,{style:styles.historyFeedback,children:analysis.feedback.message}),index<Math.min(analysisHistory.length,3)-1&&_jsx(Divider,{style:styles.historyItemDivider})]},analysis.timestamp);})]})}),!isInitialized&&_jsx(Card,{style:styles.errorCard,children:_jsxs(Card.Content,{children:[_jsx(Text,{style:styles.errorTitle,children:\"AI\\u5206\\u6790\\u304C\\u5229\\u7528\\u3067\\u304D\\u307E\\u305B\\u3093\"}),_jsx(Text,{style:styles.errorDescription,children:\"AI\\u5206\\u6790\\u30E2\\u30C7\\u30EB\\u306E\\u521D\\u671F\\u5316\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F\\u3002\\u30CD\\u30C3\\u30C8\\u30EF\\u30FC\\u30AF\\u63A5\\u7D9A\\u3092\\u78BA\\u8A8D\\u3057\\u3066\\u30A2\\u30D7\\u30EA\\u3092\\u518D\\u8D77\\u52D5\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"}),_jsx(Button,{mode:\"outlined\",onPress:function onPress(){return navigation.goBack();},style:styles.errorButton,children:\"\\u623B\\u308B\"})]})})]})]});};var getScoreColor=function getScoreColor(score){if(score>=80)return'#4CAF50';if(score>=60)return'#FF9800';return'#F44336';};var styles=StyleSheet.create({container:{flex:1,backgroundColor:'#000'},loadingContainer:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:'#f5f5f5'},loadingText:{marginTop:16,fontSize:16,color:'#666'},errorContainer:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:'#f5f5f5',padding:20},errorText:{fontSize:18,fontWeight:'bold',color:'#F44336',marginBottom:20,textAlign:'center'},cameraContainer:{flex:0.6},camera:{flex:1},cameraOverlay:{flex:1,backgroundColor:'transparent',justifyContent:'space-between'},cameraHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',padding:16,paddingTop:40},exerciseInfo:{flex:1},exerciseChip:{backgroundColor:'rgba(255,255,255,0.9)',borderColor:'#2196F3',borderWidth:1},exerciseChipText:{color:'#2196F3',fontSize:12},flipButton:{backgroundColor:'rgba(0,0,0,0.3)'},recordingIndicator:{flexDirection:'row',alignItems:'center',justifyContent:'center',backgroundColor:'rgba(244,67,54,0.9)',paddingHorizontal:16,paddingVertical:8,borderRadius:20,alignSelf:'center'},recordingDot:{width:8,height:8,borderRadius:4,backgroundColor:'#fff',marginRight:8},recordingText:{color:'#fff',fontSize:14,fontWeight:'bold'},cameraControls:{alignItems:'center',paddingBottom:40},startButton:{backgroundColor:'#4CAF50',paddingHorizontal:32},stopButton:{paddingHorizontal:32},analysisContainer:{flex:0.4,backgroundColor:'#f5f5f5'},currentAnalysis:{margin:8},summaryCard:{margin:8,elevation:4},summaryTitle:{fontSize:18,fontWeight:'bold',marginBottom:16,textAlign:'center'},summaryStats:{flexDirection:'row',justifyContent:'space-around',marginBottom:20},statItem:{alignItems:'center'},statValue:{fontSize:24,fontWeight:'bold',color:'#2196F3'},statLabel:{fontSize:12,color:'#666',marginTop:4},improvementsSection:{marginBottom:20,padding:12,backgroundColor:'#fff3cd',borderRadius:8,borderLeftWidth:4,borderLeftColor:'#ffc107'},improvementsTitle:{fontSize:14,fontWeight:'bold',marginBottom:8,color:'#856404'},improvementText:{fontSize:12,color:'#856404',lineHeight:18},summaryActions:{flexDirection:'row',justifyContent:'space-around'},retryButton:{flex:0.4},completeButton:{flex:0.4},historyCard:{margin:8,elevation:2},historyTitle:{fontSize:16,fontWeight:'bold',marginBottom:8},historyDivider:{marginBottom:12},historyItem:{marginBottom:12},historyHeader:{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:4},historyTime:{fontSize:12,color:'#666'},historyChip:{borderWidth:1},historyFeedback:{fontSize:12,color:'#333',lineHeight:16},historyItemDivider:{marginTop:8},errorCard:{margin:8,elevation:2,backgroundColor:'#ffebee'},errorTitle:{fontSize:16,fontWeight:'bold',color:'#F44336',marginBottom:8},errorDescription:{fontSize:14,color:'#666',lineHeight:20,marginBottom:16},errorButton:{alignSelf:'center'}});export default AIAnalysisScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","StyleSheet","ScrollView","Alert","Dimensions","Text","Card","Button","ActivityIndicator","Chip","Divider","IconButton","AIAnalysisDisplay","jsx","_jsx","jsxs","_jsxs","_Dimensions$get","get","screenWidth","width","screenHeight","height","AIAnalysisScreen","_ref","_route$params","_route$params2","navigation","route","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","Camera","Constants","Type","front","_useState4","cameraType","setCameraType","_useState5","_useState6","isRecording","setIsRecording","_useState7","_useState8","isAnalyzing","setIsAnalyzing","_useState9","_useState0","currentAnalysis","setCurrentAnalysis","_useState1","_useState10","sessionSummary","setSessionSummary","_useState11","_useState12","analysisHistory","setAnalysisHistory","_useState13","_useState14","isInitialized","setIsInitialized","cameraRef","analysisIntervalRef","exerciseType","params","exerciseName","_asyncToGenerator","cameraStatus","requestCameraPermissionsAsync","mediaLibraryStatus","MediaLibrary","requestPermissionsAsync","status","initialized","aiAnalysisService","initializeModel","error","console","current","clearInterval","startAnalysis","_ref3","alert","resetAnalysis","setInterval","dummyKeypoints","generateDummyKeypoints","result","analyzeFrame","prev","concat","_toConsumableArray","slice","apply","arguments","stopAnalysis","summary","getSessionSummary","totalFrames","averageScore","issueCount","text","onPress","toggleCameraType","back","retryAnalysis","keypoints","baseX","baseY","i","push","x","Math","random","y","score","style","styles","loadingContainer","children","size","loadingText","errorContainer","errorText","mode","goBack","container","cameraContainer","ref","camera","type","ratio","cameraOverlay","cameraHeader","exerciseInfo","exerciseChip","textStyle","exerciseChipText","icon","iconColor","flipButton","recordingIndicator","recordingDot","recordingText","cameraControls","startButton","disabled","stopButton","buttonColor","analysisContainer","analysisResult","summaryCard","Content","summaryTitle","summaryStats","statItem","statValue","statLabel","color","getScoreColor","improvements","length","improvementsSection","improvementsTitle","map","improvement","index","improvementText","summaryActions","retryButton","completeButton","historyCard","historyTitle","historyDivider","analysis","historyItem","historyHeader","historyTime","Date","timestamp","toLocaleTimeString","compact","historyChip","borderColor","overallScore","historyFeedback","feedback","message","min","historyItemDivider","errorCard","errorTitle","errorDescription","errorButton","create","flex","backgroundColor","justifyContent","alignItems","marginTop","fontSize","padding","fontWeight","marginBottom","textAlign","flexDirection","paddingTop","borderWidth","paddingHorizontal","paddingVertical","borderRadius","alignSelf","marginRight","paddingBottom","margin","elevation","borderLeftWidth","borderLeftColor","lineHeight"],"sources":["/Users/shota/Desktop/文献検索/acl-rehab-app/mobile/src/screens/AIAnalysisScreen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  StyleSheet,\n  ScrollView,\n  Alert,\n  Dimensions,\n} from 'react-native';\nimport {\n  Text,\n  Card,\n  Button,\n  ActivityIndicator,\n  Chip,\n  Divider,\n  IconButton,\n} from 'react-native-paper';\n// import { Camera } from 'expo-camera';\n// import * as MediaLibrary from 'expo-media-library';\nimport AIAnalysisDisplay from '../components/AIAnalysisDisplay';\n// import aiAnalysisService from '../services/aiAnalysis';\n\nconst { width: screenWidth, height: screenHeight } = Dimensions.get('window');\n\nconst AIAnalysisScreen = ({ navigation, route }) => {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [cameraType, setCameraType] = useState(Camera.Constants.Type.front);\n  const [isRecording, setIsRecording] = useState(false);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [currentAnalysis, setCurrentAnalysis] = useState(null);\n  const [sessionSummary, setSessionSummary] = useState(null);\n  const [analysisHistory, setAnalysisHistory] = useState([]);\n  const [isInitialized, setIsInitialized] = useState(false);\n  \n  const cameraRef = useRef(null);\n  const analysisIntervalRef = useRef(null);\n  \n  const exerciseType = route.params?.exerciseType || 'squat';\n  const exerciseName = route.params?.exerciseName || 'AI動作分析';\n\n  useEffect(() => {\n    (async () => {\n      // カメラ権限の取得\n      const cameraStatus = await Camera.requestCameraPermissionsAsync();\n      const mediaLibraryStatus = await MediaLibrary.requestPermissionsAsync();\n      \n      setHasPermission(\n        cameraStatus.status === 'granted' && mediaLibraryStatus.status === 'granted'\n      );\n\n      // AI分析サービス初期化\n      try {\n        const initialized = await aiAnalysisService.initializeModel();\n        setIsInitialized(initialized);\n      } catch (error) {\n        console.error('AI分析サービス初期化エラー:', error);\n        setIsInitialized(false);\n      }\n    })();\n\n    return () => {\n      // クリーンアップ\n      if (analysisIntervalRef.current) {\n        clearInterval(analysisIntervalRef.current);\n      }\n    };\n  }, []);\n\n  const startAnalysis = async () => {\n    if (!cameraRef.current || !isInitialized) {\n      Alert.alert('エラー', 'カメラまたはAI分析の準備ができていません。');\n      return;\n    }\n\n    setIsRecording(true);\n    setIsAnalyzing(true);\n    aiAnalysisService.resetAnalysis();\n    setAnalysisHistory([]);\n    setCurrentAnalysis(null);\n\n    // 定期的な分析実行（実際の実装では pose estimation ライブラリと連携）\n    analysisIntervalRef.current = setInterval(async () => {\n      try {\n        // ダミーのキーポイントデータ（実際の実装では pose estimation から取得）\n        const dummyKeypoints = generateDummyKeypoints();\n        \n        const result = await aiAnalysisService.analyzeFrame(dummyKeypoints, exerciseType);\n        \n        setCurrentAnalysis(result);\n        setAnalysisHistory(prev => [...prev, result].slice(-10)); // 最新10件を保持\n        \n      } catch (error) {\n        console.error('フレーム分析エラー:', error);\n      }\n    }, 2000); // 2秒間隔で分析\n  };\n\n  const stopAnalysis = () => {\n    setIsRecording(false);\n    setIsAnalyzing(false);\n    \n    if (analysisIntervalRef.current) {\n      clearInterval(analysisIntervalRef.current);\n      analysisIntervalRef.current = null;\n    }\n\n    // セッションサマリー生成\n    const summary = aiAnalysisService.getSessionSummary();\n    setSessionSummary(summary);\n\n    Alert.alert(\n      'AI分析完了',\n      `分析フレーム数: ${summary.totalFrames}\\n平均スコア: ${summary.averageScore}点\\n問題検出: ${summary.issueCount}回`,\n      [\n        { text: '確認', onPress: () => {} }\n      ]\n    );\n  };\n\n  const toggleCameraType = () => {\n    setCameraType(\n      cameraType === Camera.Constants.Type.back\n        ? Camera.Constants.Type.front\n        : Camera.Constants.Type.back\n    );\n  };\n\n  const retryAnalysis = () => {\n    setCurrentAnalysis(null);\n    setSessionSummary(null);\n    setAnalysisHistory([]);\n    aiAnalysisService.resetAnalysis();\n  };\n\n  // ダミーキーポイント生成（実際の実装では pose estimation ライブラリから取得）\n  const generateDummyKeypoints = () => {\n    const keypoints = [];\n    \n    // 主要な関節点をダミーで生成\n    const baseX = screenWidth / 2;\n    const baseY = screenHeight / 2;\n    \n    for (let i = 0; i < 17; i++) {\n      keypoints.push({\n        x: baseX + (Math.random() - 0.5) * 100,\n        y: baseY + (Math.random() - 0.5) * 200,\n        score: 0.8 + Math.random() * 0.2\n      });\n    }\n    \n    return keypoints;\n  };\n\n  if (hasPermission === null) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" />\n        <Text style={styles.loadingText}>カメラの準備中...</Text>\n      </View>\n    );\n  }\n\n  if (hasPermission === false) {\n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>カメラへのアクセスが必要です</Text>\n        <Button mode=\"contained\" onPress={() => navigation.goBack()}>\n          戻る\n        </Button>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {/* カメラビュー */}\n      <View style={styles.cameraContainer}>\n        <Camera\n          ref={cameraRef}\n          style={styles.camera}\n          type={cameraType}\n          ratio=\"16:9\"\n        >\n          {/* カメラオーバーレイ */}\n          <View style={styles.cameraOverlay}>\n            {/* ヘッダー */}\n            <View style={styles.cameraHeader}>\n              <View style={styles.exerciseInfo}>\n                <Chip\n                  mode=\"outlined\"\n                  style={styles.exerciseChip}\n                  textStyle={styles.exerciseChipText}\n                >\n                  {exerciseName}\n                </Chip>\n              </View>\n              <IconButton\n                icon=\"camera-flip\"\n                size={24}\n                iconColor=\"#fff\"\n                onPress={toggleCameraType}\n                style={styles.flipButton}\n              />\n            </View>\n\n            {/* 録画状態インジケーター */}\n            {isRecording && (\n              <View style={styles.recordingIndicator}>\n                <View style={styles.recordingDot} />\n                <Text style={styles.recordingText}>AI分析中</Text>\n              </View>\n            )}\n\n            {/* コントロールボタン */}\n            <View style={styles.cameraControls}>\n              {!isRecording ? (\n                <Button\n                  mode=\"contained\"\n                  onPress={startAnalysis}\n                  style={styles.startButton}\n                  disabled={!isInitialized}\n                >\n                  分析開始\n                </Button>\n              ) : (\n                <Button\n                  mode=\"contained\"\n                  onPress={stopAnalysis}\n                  style={styles.stopButton}\n                  buttonColor=\"#F44336\"\n                >\n                  分析停止\n                </Button>\n              )}\n            </View>\n          </View>\n        </Camera>\n      </View>\n\n      {/* 分析結果表示エリア */}\n      <ScrollView style={styles.analysisContainer}>\n        {/* 現在の分析結果 */}\n        {(currentAnalysis || isAnalyzing) && (\n          <AIAnalysisDisplay\n            analysisResult={currentAnalysis}\n            isAnalyzing={isAnalyzing && !currentAnalysis}\n            style={styles.currentAnalysis}\n          />\n        )}\n\n        {/* セッションサマリー */}\n        {sessionSummary && (\n          <Card style={styles.summaryCard}>\n            <Card.Content>\n              <Text style={styles.summaryTitle}>セッション分析結果</Text>\n              \n              <View style={styles.summaryStats}>\n                <View style={styles.statItem}>\n                  <Text style={styles.statValue}>{sessionSummary.totalFrames}</Text>\n                  <Text style={styles.statLabel}>分析フレーム</Text>\n                </View>\n                <View style={styles.statItem}>\n                  <Text style={[styles.statValue, { color: getScoreColor(sessionSummary.averageScore) }]}>\n                    {sessionSummary.averageScore}\n                  </Text>\n                  <Text style={styles.statLabel}>平均スコア</Text>\n                </View>\n                <View style={styles.statItem}>\n                  <Text style={[styles.statValue, { color: sessionSummary.issueCount > 0 ? '#F44336' : '#4CAF50' }]}>\n                    {sessionSummary.issueCount}\n                  </Text>\n                  <Text style={styles.statLabel}>問題検出</Text>\n                </View>\n              </View>\n\n              {sessionSummary.improvements.length > 0 && (\n                <View style={styles.improvementsSection}>\n                  <Text style={styles.improvementsTitle}>改善提案</Text>\n                  {sessionSummary.improvements.map((improvement, index) => (\n                    <Text key={index} style={styles.improvementText}>\n                      • {improvement}\n                    </Text>\n                  ))}\n                </View>\n              )}\n\n              <View style={styles.summaryActions}>\n                <Button\n                  mode=\"outlined\"\n                  onPress={retryAnalysis}\n                  style={styles.retryButton}\n                >\n                  再分析\n                </Button>\n                <Button\n                  mode=\"contained\"\n                  onPress={() => navigation.goBack()}\n                  style={styles.completeButton}\n                >\n                  完了\n                </Button>\n              </View>\n            </Card.Content>\n          </Card>\n        )}\n\n        {/* 分析履歴 */}\n        {analysisHistory.length > 0 && !sessionSummary && (\n          <Card style={styles.historyCard}>\n            <Card.Content>\n              <Text style={styles.historyTitle}>分析履歴</Text>\n              <Divider style={styles.historyDivider} />\n              {analysisHistory.slice(-3).map((analysis, index) => (\n                <View key={analysis.timestamp} style={styles.historyItem}>\n                  <View style={styles.historyHeader}>\n                    <Text style={styles.historyTime}>\n                      {new Date(analysis.timestamp).toLocaleTimeString('ja-JP')}\n                    </Text>\n                    <Chip\n                      mode=\"outlined\"\n                      compact\n                      style={[styles.historyChip, { borderColor: getScoreColor(analysis.overallScore) }]}\n                      textStyle={{ color: getScoreColor(analysis.overallScore) }}\n                    >\n                      {analysis.overallScore}点\n                    </Chip>\n                  </View>\n                  <Text style={styles.historyFeedback}>\n                    {analysis.feedback.message}\n                  </Text>\n                  {index < Math.min(analysisHistory.length, 3) - 1 && (\n                    <Divider style={styles.historyItemDivider} />\n                  )}\n                </View>\n              ))}\n            </Card.Content>\n          </Card>\n        )}\n\n        {/* 初期化エラー */}\n        {!isInitialized && (\n          <Card style={styles.errorCard}>\n            <Card.Content>\n              <Text style={styles.errorTitle}>AI分析が利用できません</Text>\n              <Text style={styles.errorDescription}>\n                AI分析モデルの初期化に失敗しました。ネットワーク接続を確認してアプリを再起動してください。\n              </Text>\n              <Button\n                mode=\"outlined\"\n                onPress={() => navigation.goBack()}\n                style={styles.errorButton}\n              >\n                戻る\n              </Button>\n            </Card.Content>\n          </Card>\n        )}\n      </ScrollView>\n    </View>\n  );\n};\n\n// ヘルパー関数\nconst getScoreColor = (score) => {\n  if (score >= 80) return '#4CAF50';\n  if (score >= 60) return '#FF9800';\n  return '#F44336';\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#666',\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 20,\n  },\n  errorText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  cameraContainer: {\n    flex: 0.6,\n  },\n  camera: {\n    flex: 1,\n  },\n  cameraOverlay: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    justifyContent: 'space-between',\n  },\n  cameraHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    paddingTop: 40,\n  },\n  exerciseInfo: {\n    flex: 1,\n  },\n  exerciseChip: {\n    backgroundColor: 'rgba(255,255,255,0.9)',\n    borderColor: '#2196F3',\n    borderWidth: 1,\n  },\n  exerciseChipText: {\n    color: '#2196F3',\n    fontSize: 12,\n  },\n  flipButton: {\n    backgroundColor: 'rgba(0,0,0,0.3)',\n  },\n  recordingIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(244,67,54,0.9)',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    alignSelf: 'center',\n  },\n  recordingDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#fff',\n    marginRight: 8,\n  },\n  recordingText: {\n    color: '#fff',\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  cameraControls: {\n    alignItems: 'center',\n    paddingBottom: 40,\n  },\n  startButton: {\n    backgroundColor: '#4CAF50',\n    paddingHorizontal: 32,\n  },\n  stopButton: {\n    paddingHorizontal: 32,\n  },\n  analysisContainer: {\n    flex: 0.4,\n    backgroundColor: '#f5f5f5',\n  },\n  currentAnalysis: {\n    margin: 8,\n  },\n  summaryCard: {\n    margin: 8,\n    elevation: 4,\n  },\n  summaryTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  summaryStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#2196F3',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  improvementsSection: {\n    marginBottom: 20,\n    padding: 12,\n    backgroundColor: '#fff3cd',\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#ffc107',\n  },\n  improvementsTitle: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: '#856404',\n  },\n  improvementText: {\n    fontSize: 12,\n    color: '#856404',\n    lineHeight: 18,\n  },\n  summaryActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  retryButton: {\n    flex: 0.4,\n  },\n  completeButton: {\n    flex: 0.4,\n  },\n  historyCard: {\n    margin: 8,\n    elevation: 2,\n  },\n  historyTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 8,\n  },\n  historyDivider: {\n    marginBottom: 12,\n  },\n  historyItem: {\n    marginBottom: 12,\n  },\n  historyHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  historyTime: {\n    fontSize: 12,\n    color: '#666',\n  },\n  historyChip: {\n    borderWidth: 1,\n  },\n  historyFeedback: {\n    fontSize: 12,\n    color: '#333',\n    lineHeight: 16,\n  },\n  historyItemDivider: {\n    marginTop: 8,\n  },\n  errorCard: {\n    margin: 8,\n    elevation: 2,\n    backgroundColor: '#ffebee',\n  },\n  errorTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 8,\n  },\n  errorDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 20,\n    marginBottom: 16,\n  },\n  errorButton: {\n    alignSelf: 'center',\n  },\n});\n\nexport default AIAnalysisScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}