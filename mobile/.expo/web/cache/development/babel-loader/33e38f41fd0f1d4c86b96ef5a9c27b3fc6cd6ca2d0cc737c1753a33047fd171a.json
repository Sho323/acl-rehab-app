{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/shota/Desktop/\\u6587\\u732E\\u691C\\u7D22/acl-rehab-app/mobile/src/screens/AIAnalysisScreen.js\",\n  _this = this;\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Text, Card, Button, ActivityIndicator, Chip, Divider, IconButton } from 'react-native-paper';\nimport { Camera } from 'expo-camera';\nimport * as MediaLibrary from 'expo-media-library';\nimport AIAnalysisDisplay from \"../components/AIAnalysisDisplay\";\nimport aiAnalysisService from \"../services/aiAnalysis\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _Dimensions$get = Dimensions.get('window'),\n  screenWidth = _Dimensions$get.width,\n  screenHeight = _Dimensions$get.height;\nvar AIAnalysisScreen = function AIAnalysisScreen(_ref) {\n  var _route$params, _route$params2;\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState('front'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    cameraType = _useState4[0],\n    setCameraType = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isRecording = _useState6[0],\n    setIsRecording = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isAnalyzing = _useState8[0],\n    setIsAnalyzing = _useState8[1];\n  var _useState9 = useState(null),\n    _useState0 = _slicedToArray(_useState9, 2),\n    currentAnalysis = _useState0[0],\n    setCurrentAnalysis = _useState0[1];\n  var _useState1 = useState(null),\n    _useState10 = _slicedToArray(_useState1, 2),\n    sessionSummary = _useState10[0],\n    setSessionSummary = _useState10[1];\n  var _useState11 = useState([]),\n    _useState12 = _slicedToArray(_useState11, 2),\n    analysisHistory = _useState12[0],\n    setAnalysisHistory = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isInitialized = _useState14[0],\n    setIsInitialized = _useState14[1];\n  var cameraRef = useRef(null);\n  var analysisIntervalRef = useRef(null);\n  var exerciseType = ((_route$params = route.params) == null ? void 0 : _route$params.exerciseType) || 'squat';\n  var exerciseName = ((_route$params2 = route.params) == null ? void 0 : _route$params2.exerciseName) || 'AI動作分析';\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      try {\n        console.log('カメラ権限を要求中...');\n        var cameraStatus = yield Camera.requestCameraPermissionsAsync();\n        console.log('カメラ権限ステータス:', cameraStatus);\n        var mediaLibraryStatus = yield MediaLibrary.requestPermissionsAsync();\n        console.log('メディアライブラリ権限ステータス:', mediaLibraryStatus);\n        var hasAllPermissions = cameraStatus.status === 'granted' && mediaLibraryStatus.status === 'granted';\n        setHasPermission(hasAllPermissions);\n        if (!hasAllPermissions) {\n          Alert.alert('権限エラー', 'カメラとメディアライブラリへのアクセス権限が必要です。設定で権限を許可してください。', [{\n            text: 'OK',\n            onPress: function onPress() {\n              return navigation.goBack();\n            }\n          }]);\n          return;\n        }\n        console.log('AI分析サービスを初期化中...');\n        var initialized = yield aiAnalysisService.initializeModel();\n        setIsInitialized(initialized);\n        console.log('AI分析サービス初期化完了:', initialized);\n      } catch (error) {\n        console.error('初期化エラー:', error);\n        Alert.alert('エラー', 'アプリの初期化に失敗しました: ' + error.message);\n        setIsInitialized(false);\n        setHasPermission(false);\n      }\n    })();\n    return function () {\n      if (analysisIntervalRef.current) {\n        clearInterval(analysisIntervalRef.current);\n      }\n    };\n  }, [navigation]);\n  var startAnalysis = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (!cameraRef.current || !isInitialized) {\n        Alert.alert('エラー', 'カメラまたはAI分析の準備ができていません。');\n        return;\n      }\n      setIsRecording(true);\n      setIsAnalyzing(true);\n      aiAnalysisService.resetAnalysis();\n      setAnalysisHistory([]);\n      setCurrentAnalysis(null);\n      analysisIntervalRef.current = setInterval(_asyncToGenerator(function* () {\n        try {\n          var dummyKeypoints = generateDummyKeypoints();\n          var result = yield aiAnalysisService.analyzeFrame(dummyKeypoints, exerciseType);\n          setCurrentAnalysis(result);\n          setAnalysisHistory(function (prev) {\n            return [].concat(_toConsumableArray(prev), [result]).slice(-10);\n          });\n        } catch (error) {\n          console.error('フレーム分析エラー:', error);\n        }\n      }), 2000);\n    });\n    return function startAnalysis() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var stopAnalysis = function stopAnalysis() {\n    setIsRecording(false);\n    setIsAnalyzing(false);\n    if (analysisIntervalRef.current) {\n      clearInterval(analysisIntervalRef.current);\n      analysisIntervalRef.current = null;\n    }\n    var summary = aiAnalysisService.getSessionSummary();\n    setSessionSummary(summary);\n    Alert.alert('AI分析完了', `分析フレーム数: ${summary.totalFrames}\\n平均スコア: ${summary.averageScore}点\\n問題検出: ${summary.issueCount}回`, [{\n      text: '確認',\n      onPress: function onPress() {}\n    }]);\n  };\n  var toggleCameraType = function toggleCameraType() {\n    setCameraType(cameraType === 'back' ? 'front' : 'back');\n  };\n  var retryAnalysis = function retryAnalysis() {\n    setCurrentAnalysis(null);\n    setSessionSummary(null);\n    setAnalysisHistory([]);\n    aiAnalysisService.resetAnalysis();\n  };\n  var generateDummyKeypoints = function generateDummyKeypoints() {\n    var keypoints = [];\n    var baseX = screenWidth / 2;\n    var baseY = screenHeight / 2;\n    for (var i = 0; i < 17; i++) {\n      keypoints.push({\n        x: baseX + (Math.random() - 0.5) * 100,\n        y: baseY + (Math.random() - 0.5) * 200,\n        score: 0.8 + Math.random() * 0.2\n      });\n    }\n    return keypoints;\n  };\n  if (hasPermission === null) {\n    return _jsxDEV(View, {\n      style: styles.loadingContainer,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, _this), _jsxDEV(Text, {\n        style: styles.loadingText,\n        children: \"\\u30AB\\u30E1\\u30E9\\u306E\\u6E96\\u5099\\u4E2D...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, _this);\n  }\n  if (hasPermission === false) {\n    return _jsxDEV(View, {\n      style: styles.errorContainer,\n      children: [_jsxDEV(Text, {\n        style: styles.errorText,\n        children: \"\\u30AB\\u30E1\\u30E9\\u3078\\u306E\\u30A2\\u30AF\\u30BB\\u30B9\\u304C\\u5FC5\\u8981\\u3067\\u3059\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, _this), _jsxDEV(Button, {\n        mode: \"contained\",\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        children: \"\\u623B\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, _this);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.cameraContainer,\n      children: _jsxDEV(Camera, {\n        ref: cameraRef,\n        style: styles.camera,\n        facing: cameraType,\n        ratio: \"16:9\",\n        children: _jsxDEV(View, {\n          style: styles.cameraOverlay,\n          children: [_jsxDEV(View, {\n            style: styles.cameraHeader,\n            children: [_jsxDEV(View, {\n              style: styles.exerciseInfo,\n              children: _jsxDEV(Chip, {\n                mode: \"outlined\",\n                style: styles.exerciseChip,\n                textStyle: styles.exerciseChipText,\n                children: exerciseName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, _this), _jsxDEV(IconButton, {\n              icon: \"camera-flip\",\n              size: 24,\n              iconColor: \"#fff\",\n              onPress: toggleCameraType,\n              style: styles.flipButton\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, _this), isRecording && _jsxDEV(View, {\n            style: styles.recordingIndicator,\n            children: [_jsxDEV(View, {\n              style: styles.recordingDot\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, _this), _jsxDEV(Text, {\n              style: styles.recordingText,\n              children: \"AI\\u5206\\u6790\\u4E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, _this), _jsxDEV(View, {\n            style: styles.cameraControls,\n            children: !isRecording ? _jsxDEV(Button, {\n              mode: \"contained\",\n              onPress: startAnalysis,\n              style: styles.startButton,\n              disabled: !isInitialized,\n              children: \"\\u5206\\u6790\\u958B\\u59CB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, _this) : _jsxDEV(Button, {\n              mode: \"contained\",\n              onPress: stopAnalysis,\n              style: styles.stopButton,\n              buttonColor: \"#F44336\",\n              children: \"\\u5206\\u6790\\u505C\\u6B62\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, _this), _jsxDEV(ScrollView, {\n      style: styles.analysisContainer,\n      children: [(currentAnalysis || isAnalyzing) && _jsxDEV(AIAnalysisDisplay, {\n        analysisResult: currentAnalysis,\n        isAnalyzing: isAnalyzing && !currentAnalysis,\n        style: styles.currentAnalysis\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, _this), sessionSummary && _jsxDEV(Card, {\n        style: styles.summaryCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Text, {\n            style: styles.summaryTitle,\n            children: \"\\u30BB\\u30C3\\u30B7\\u30E7\\u30F3\\u5206\\u6790\\u7D50\\u679C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, _this), _jsxDEV(View, {\n            style: styles.summaryStats,\n            children: [_jsxDEV(View, {\n              style: styles.statItem,\n              children: [_jsxDEV(Text, {\n                style: styles.statValue,\n                children: sessionSummary.totalFrames\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.statLabel,\n                children: \"\\u5206\\u6790\\u30D5\\u30EC\\u30FC\\u30E0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, _this), _jsxDEV(View, {\n              style: styles.statItem,\n              children: [_jsxDEV(Text, {\n                style: [styles.statValue, {\n                  color: getScoreColor(sessionSummary.averageScore)\n                }],\n                children: sessionSummary.averageScore\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.statLabel,\n                children: \"\\u5E73\\u5747\\u30B9\\u30B3\\u30A2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, _this), _jsxDEV(View, {\n              style: styles.statItem,\n              children: [_jsxDEV(Text, {\n                style: [styles.statValue, {\n                  color: sessionSummary.issueCount > 0 ? '#F44336' : '#4CAF50'\n                }],\n                children: sessionSummary.issueCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.statLabel,\n                children: \"\\u554F\\u984C\\u691C\\u51FA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, _this), sessionSummary.improvements.length > 0 && _jsxDEV(View, {\n            style: styles.improvementsSection,\n            children: [_jsxDEV(Text, {\n              style: styles.improvementsTitle,\n              children: \"\\u6539\\u5584\\u63D0\\u6848\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 19\n            }, _this), sessionSummary.improvements.map(function (improvement, index) {\n              return _jsxDEV(Text, {\n                style: styles.improvementText,\n                children: [\"\\u2022 \", improvement]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 21\n              }, _this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 17\n          }, _this), _jsxDEV(View, {\n            style: styles.summaryActions,\n            children: [_jsxDEV(Button, {\n              mode: \"outlined\",\n              onPress: retryAnalysis,\n              style: styles.retryButton,\n              children: \"\\u518D\\u5206\\u6790\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 17\n            }, _this), _jsxDEV(Button, {\n              mode: \"contained\",\n              onPress: function onPress() {\n                return navigation.goBack();\n              },\n              style: styles.completeButton,\n              children: \"\\u5B8C\\u4E86\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, _this), analysisHistory.length > 0 && !sessionSummary && _jsxDEV(Card, {\n        style: styles.historyCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Text, {\n            style: styles.historyTitle,\n            children: \"\\u5206\\u6790\\u5C65\\u6B74\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, _this), _jsxDEV(Divider, {\n            style: styles.historyDivider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, _this), analysisHistory.slice(-3).map(function (analysis, index) {\n            return _jsxDEV(View, {\n              style: styles.historyItem,\n              children: [_jsxDEV(View, {\n                style: styles.historyHeader,\n                children: [_jsxDEV(Text, {\n                  style: styles.historyTime,\n                  children: new Date(analysis.timestamp).toLocaleTimeString('ja-JP')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 21\n                }, _this), _jsxDEV(Chip, {\n                  mode: \"outlined\",\n                  compact: true,\n                  style: [styles.historyChip, {\n                    borderColor: getScoreColor(analysis.overallScore)\n                  }],\n                  textStyle: {\n                    color: getScoreColor(analysis.overallScore)\n                  },\n                  children: [analysis.overallScore, \"\\u70B9\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.historyFeedback,\n                children: analysis.feedback.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 19\n              }, _this), index < Math.min(analysisHistory.length, 3) - 1 && _jsxDEV(Divider, {\n                style: styles.historyItemDivider\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 21\n              }, _this)]\n            }, analysis.timestamp, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 17\n            }, _this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, _this), !isInitialized && _jsxDEV(Card, {\n        style: styles.errorCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Text, {\n            style: styles.errorTitle,\n            children: \"AI\\u5206\\u6790\\u304C\\u5229\\u7528\\u3067\\u304D\\u307E\\u305B\\u3093\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, _this), _jsxDEV(Text, {\n            style: styles.errorDescription,\n            children: \"AI\\u5206\\u6790\\u30E2\\u30C7\\u30EB\\u306E\\u521D\\u671F\\u5316\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F\\u3002\\u30CD\\u30C3\\u30C8\\u30EF\\u30FC\\u30AF\\u63A5\\u7D9A\\u3092\\u78BA\\u8A8D\\u3057\\u3066\\u30A2\\u30D7\\u30EA\\u3092\\u518D\\u8D77\\u52D5\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, _this), _jsxDEV(Button, {\n            mode: \"outlined\",\n            onPress: function onPress() {\n              return navigation.goBack();\n            },\n            style: styles.errorButton,\n            children: \"\\u623B\\u308B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, _this);\n};\nvar getScoreColor = function getScoreColor(score) {\n  if (score >= 80) return '#4CAF50';\n  if (score >= 60) return '#FF9800';\n  return '#F44336';\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5'\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#666'\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 20\n  },\n  errorText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 20,\n    textAlign: 'center'\n  },\n  cameraContainer: {\n    flex: 0.6\n  },\n  camera: {\n    flex: 1\n  },\n  cameraOverlay: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    justifyContent: 'space-between'\n  },\n  cameraHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    paddingTop: 40\n  },\n  exerciseInfo: {\n    flex: 1\n  },\n  exerciseChip: {\n    backgroundColor: 'rgba(255,255,255,0.9)',\n    borderColor: '#2196F3',\n    borderWidth: 1\n  },\n  exerciseChipText: {\n    color: '#2196F3',\n    fontSize: 12\n  },\n  flipButton: {\n    backgroundColor: 'rgba(0,0,0,0.3)'\n  },\n  recordingIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(244,67,54,0.9)',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    alignSelf: 'center'\n  },\n  recordingDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#fff',\n    marginRight: 8\n  },\n  recordingText: {\n    color: '#fff',\n    fontSize: 14,\n    fontWeight: 'bold'\n  },\n  cameraControls: {\n    alignItems: 'center',\n    paddingBottom: 40\n  },\n  startButton: {\n    backgroundColor: '#4CAF50',\n    paddingHorizontal: 32\n  },\n  stopButton: {\n    paddingHorizontal: 32\n  },\n  analysisContainer: {\n    flex: 0.4,\n    backgroundColor: '#f5f5f5'\n  },\n  currentAnalysis: {\n    margin: 8\n  },\n  summaryCard: {\n    margin: 8,\n    elevation: 4\n  },\n  summaryTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center'\n  },\n  summaryStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20\n  },\n  statItem: {\n    alignItems: 'center'\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#2196F3'\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4\n  },\n  improvementsSection: {\n    marginBottom: 20,\n    padding: 12,\n    backgroundColor: '#fff3cd',\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#ffc107'\n  },\n  improvementsTitle: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: '#856404'\n  },\n  improvementText: {\n    fontSize: 12,\n    color: '#856404',\n    lineHeight: 18\n  },\n  summaryActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-around'\n  },\n  retryButton: {\n    flex: 0.4\n  },\n  completeButton: {\n    flex: 0.4\n  },\n  historyCard: {\n    margin: 8,\n    elevation: 2\n  },\n  historyTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 8\n  },\n  historyDivider: {\n    marginBottom: 12\n  },\n  historyItem: {\n    marginBottom: 12\n  },\n  historyHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4\n  },\n  historyTime: {\n    fontSize: 12,\n    color: '#666'\n  },\n  historyChip: {\n    borderWidth: 1\n  },\n  historyFeedback: {\n    fontSize: 12,\n    color: '#333',\n    lineHeight: 16\n  },\n  historyItemDivider: {\n    marginTop: 8\n  },\n  errorCard: {\n    margin: 8,\n    elevation: 2,\n    backgroundColor: '#ffebee'\n  },\n  errorTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 8\n  },\n  errorDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 20,\n    marginBottom: 16\n  },\n  errorButton: {\n    alignSelf: 'center'\n  }\n});\nexport default AIAnalysisScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","StyleSheet","ScrollView","Alert","Dimensions","Text","Card","Button","ActivityIndicator","Chip","Divider","IconButton","Camera","MediaLibrary","AIAnalysisDisplay","aiAnalysisService","jsxDEV","_jsxDEV","_Dimensions$get","get","screenWidth","width","screenHeight","height","AIAnalysisScreen","_ref","_route$params","_route$params2","navigation","route","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","cameraType","setCameraType","_useState5","_useState6","isRecording","setIsRecording","_useState7","_useState8","isAnalyzing","setIsAnalyzing","_useState9","_useState0","currentAnalysis","setCurrentAnalysis","_useState1","_useState10","sessionSummary","setSessionSummary","_useState11","_useState12","analysisHistory","setAnalysisHistory","_useState13","_useState14","isInitialized","setIsInitialized","cameraRef","analysisIntervalRef","exerciseType","params","exerciseName","_asyncToGenerator","console","log","cameraStatus","requestCameraPermissionsAsync","mediaLibraryStatus","requestPermissionsAsync","hasAllPermissions","status","alert","text","onPress","goBack","initialized","initializeModel","error","message","current","clearInterval","startAnalysis","_ref3","resetAnalysis","setInterval","dummyKeypoints","generateDummyKeypoints","result","analyzeFrame","prev","concat","_toConsumableArray","slice","apply","arguments","stopAnalysis","summary","getSessionSummary","totalFrames","averageScore","issueCount","toggleCameraType","retryAnalysis","keypoints","baseX","baseY","i","push","x","Math","random","y","score","style","styles","loadingContainer","children","size","fileName","_jsxFileName","lineNumber","columnNumber","_this","loadingText","errorContainer","errorText","mode","container","cameraContainer","ref","camera","facing","ratio","cameraOverlay","cameraHeader","exerciseInfo","exerciseChip","textStyle","exerciseChipText","icon","iconColor","flipButton","recordingIndicator","recordingDot","recordingText","cameraControls","startButton","disabled","stopButton","buttonColor","analysisContainer","analysisResult","summaryCard","Content","summaryTitle","summaryStats","statItem","statValue","statLabel","color","getScoreColor","improvements","length","improvementsSection","improvementsTitle","map","improvement","index","improvementText","summaryActions","retryButton","completeButton","historyCard","historyTitle","historyDivider","analysis","historyItem","historyHeader","historyTime","Date","timestamp","toLocaleTimeString","compact","historyChip","borderColor","overallScore","historyFeedback","feedback","min","historyItemDivider","errorCard","errorTitle","errorDescription","errorButton","create","flex","backgroundColor","justifyContent","alignItems","marginTop","fontSize","padding","fontWeight","marginBottom","textAlign","flexDirection","paddingTop","borderWidth","paddingHorizontal","paddingVertical","borderRadius","alignSelf","marginRight","paddingBottom","margin","elevation","borderLeftWidth","borderLeftColor","lineHeight"],"sources":["/Users/shota/Desktop/文献検索/acl-rehab-app/mobile/src/screens/AIAnalysisScreen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  StyleSheet,\n  ScrollView,\n  Alert,\n  Dimensions,\n} from 'react-native';\nimport {\n  Text,\n  Card,\n  Button,\n  ActivityIndicator,\n  Chip,\n  Divider,\n  IconButton,\n} from 'react-native-paper';\nimport { Camera } from 'expo-camera';\nimport * as MediaLibrary from 'expo-media-library';\nimport AIAnalysisDisplay from '../components/AIAnalysisDisplay';\nimport aiAnalysisService from '../services/aiAnalysis';\n\nconst { width: screenWidth, height: screenHeight } = Dimensions.get('window');\n\nconst AIAnalysisScreen = ({ navigation, route }) => {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [cameraType, setCameraType] = useState('front');\n  const [isRecording, setIsRecording] = useState(false);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [currentAnalysis, setCurrentAnalysis] = useState(null);\n  const [sessionSummary, setSessionSummary] = useState(null);\n  const [analysisHistory, setAnalysisHistory] = useState([]);\n  const [isInitialized, setIsInitialized] = useState(false);\n  \n  const cameraRef = useRef(null);\n  const analysisIntervalRef = useRef(null);\n  \n  const exerciseType = route.params?.exerciseType || 'squat';\n  const exerciseName = route.params?.exerciseName || 'AI動作分析';\n\n  useEffect(() => {\n    (async () => {\n      try {\n        // カメラ権限の取得\n        console.log('カメラ権限を要求中...');\n        const cameraStatus = await Camera.requestCameraPermissionsAsync();\n        console.log('カメラ権限ステータス:', cameraStatus);\n        \n        const mediaLibraryStatus = await MediaLibrary.requestPermissionsAsync();\n        console.log('メディアライブラリ権限ステータス:', mediaLibraryStatus);\n        \n        const hasAllPermissions = cameraStatus.status === 'granted' && mediaLibraryStatus.status === 'granted';\n        setHasPermission(hasAllPermissions);\n        \n        if (!hasAllPermissions) {\n          Alert.alert(\n            '権限エラー', \n            'カメラとメディアライブラリへのアクセス権限が必要です。設定で権限を許可してください。',\n            [\n              { text: 'OK', onPress: () => navigation.goBack() }\n            ]\n          );\n          return;\n        }\n\n        // AI分析サービス初期化\n        console.log('AI分析サービスを初期化中...');\n        const initialized = await aiAnalysisService.initializeModel();\n        setIsInitialized(initialized);\n        console.log('AI分析サービス初期化完了:', initialized);\n        \n      } catch (error) {\n        console.error('初期化エラー:', error);\n        Alert.alert('エラー', 'アプリの初期化に失敗しました: ' + error.message);\n        setIsInitialized(false);\n        setHasPermission(false);\n      }\n    })();\n\n    return () => {\n      // クリーンアップ\n      if (analysisIntervalRef.current) {\n        clearInterval(analysisIntervalRef.current);\n      }\n    };\n  }, [navigation]);\n\n  const startAnalysis = async () => {\n    if (!cameraRef.current || !isInitialized) {\n      Alert.alert('エラー', 'カメラまたはAI分析の準備ができていません。');\n      return;\n    }\n\n    setIsRecording(true);\n    setIsAnalyzing(true);\n    aiAnalysisService.resetAnalysis();\n    setAnalysisHistory([]);\n    setCurrentAnalysis(null);\n\n    // 定期的な分析実行（実際の実装では pose estimation ライブラリと連携）\n    analysisIntervalRef.current = setInterval(async () => {\n      try {\n        // ダミーのキーポイントデータ（実際の実装では pose estimation から取得）\n        const dummyKeypoints = generateDummyKeypoints();\n        \n        const result = await aiAnalysisService.analyzeFrame(dummyKeypoints, exerciseType);\n        \n        setCurrentAnalysis(result);\n        setAnalysisHistory(prev => [...prev, result].slice(-10)); // 最新10件を保持\n        \n      } catch (error) {\n        console.error('フレーム分析エラー:', error);\n      }\n    }, 2000); // 2秒間隔で分析\n  };\n\n  const stopAnalysis = () => {\n    setIsRecording(false);\n    setIsAnalyzing(false);\n    \n    if (analysisIntervalRef.current) {\n      clearInterval(analysisIntervalRef.current);\n      analysisIntervalRef.current = null;\n    }\n\n    // セッションサマリー生成\n    const summary = aiAnalysisService.getSessionSummary();\n    setSessionSummary(summary);\n\n    Alert.alert(\n      'AI分析完了',\n      `分析フレーム数: ${summary.totalFrames}\\n平均スコア: ${summary.averageScore}点\\n問題検出: ${summary.issueCount}回`,\n      [\n        { text: '確認', onPress: () => {} }\n      ]\n    );\n  };\n\n  const toggleCameraType = () => {\n    setCameraType(\n      cameraType === 'back'\n        ? 'front'\n        : 'back'\n    );\n  };\n\n  const retryAnalysis = () => {\n    setCurrentAnalysis(null);\n    setSessionSummary(null);\n    setAnalysisHistory([]);\n    aiAnalysisService.resetAnalysis();\n  };\n\n  // ダミーキーポイント生成（実際の実装では pose estimation ライブラリから取得）\n  const generateDummyKeypoints = () => {\n    const keypoints = [];\n    \n    // 主要な関節点をダミーで生成\n    const baseX = screenWidth / 2;\n    const baseY = screenHeight / 2;\n    \n    for (let i = 0; i < 17; i++) {\n      keypoints.push({\n        x: baseX + (Math.random() - 0.5) * 100,\n        y: baseY + (Math.random() - 0.5) * 200,\n        score: 0.8 + Math.random() * 0.2\n      });\n    }\n    \n    return keypoints;\n  };\n\n  if (hasPermission === null) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" />\n        <Text style={styles.loadingText}>カメラの準備中...</Text>\n      </View>\n    );\n  }\n\n  if (hasPermission === false) {\n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>カメラへのアクセスが必要です</Text>\n        <Button mode=\"contained\" onPress={() => navigation.goBack()}>\n          戻る\n        </Button>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {/* カメラビュー */}\n      <View style={styles.cameraContainer}>\n        <Camera\n          ref={cameraRef}\n          style={styles.camera}\n          facing={cameraType}\n          ratio=\"16:9\"\n        >\n          {/* カメラオーバーレイ */}\n          <View style={styles.cameraOverlay}>\n            {/* ヘッダー */}\n            <View style={styles.cameraHeader}>\n              <View style={styles.exerciseInfo}>\n                <Chip\n                  mode=\"outlined\"\n                  style={styles.exerciseChip}\n                  textStyle={styles.exerciseChipText}\n                >\n                  {exerciseName}\n                </Chip>\n              </View>\n              <IconButton\n                icon=\"camera-flip\"\n                size={24}\n                iconColor=\"#fff\"\n                onPress={toggleCameraType}\n                style={styles.flipButton}\n              />\n            </View>\n\n            {/* 録画状態インジケーター */}\n            {isRecording && (\n              <View style={styles.recordingIndicator}>\n                <View style={styles.recordingDot} />\n                <Text style={styles.recordingText}>AI分析中</Text>\n              </View>\n            )}\n\n            {/* コントロールボタン */}\n            <View style={styles.cameraControls}>\n              {!isRecording ? (\n                <Button\n                  mode=\"contained\"\n                  onPress={startAnalysis}\n                  style={styles.startButton}\n                  disabled={!isInitialized}\n                >\n                  分析開始\n                </Button>\n              ) : (\n                <Button\n                  mode=\"contained\"\n                  onPress={stopAnalysis}\n                  style={styles.stopButton}\n                  buttonColor=\"#F44336\"\n                >\n                  分析停止\n                </Button>\n              )}\n            </View>\n          </View>\n        </Camera>\n      </View>\n\n      {/* 分析結果表示エリア */}\n      <ScrollView style={styles.analysisContainer}>\n        {/* 現在の分析結果 */}\n        {(currentAnalysis || isAnalyzing) && (\n          <AIAnalysisDisplay\n            analysisResult={currentAnalysis}\n            isAnalyzing={isAnalyzing && !currentAnalysis}\n            style={styles.currentAnalysis}\n          />\n        )}\n\n        {/* セッションサマリー */}\n        {sessionSummary && (\n          <Card style={styles.summaryCard}>\n            <Card.Content>\n              <Text style={styles.summaryTitle}>セッション分析結果</Text>\n              \n              <View style={styles.summaryStats}>\n                <View style={styles.statItem}>\n                  <Text style={styles.statValue}>{sessionSummary.totalFrames}</Text>\n                  <Text style={styles.statLabel}>分析フレーム</Text>\n                </View>\n                <View style={styles.statItem}>\n                  <Text style={[styles.statValue, { color: getScoreColor(sessionSummary.averageScore) }]}>\n                    {sessionSummary.averageScore}\n                  </Text>\n                  <Text style={styles.statLabel}>平均スコア</Text>\n                </View>\n                <View style={styles.statItem}>\n                  <Text style={[styles.statValue, { color: sessionSummary.issueCount > 0 ? '#F44336' : '#4CAF50' }]}>\n                    {sessionSummary.issueCount}\n                  </Text>\n                  <Text style={styles.statLabel}>問題検出</Text>\n                </View>\n              </View>\n\n              {sessionSummary.improvements.length > 0 && (\n                <View style={styles.improvementsSection}>\n                  <Text style={styles.improvementsTitle}>改善提案</Text>\n                  {sessionSummary.improvements.map((improvement, index) => (\n                    <Text key={index} style={styles.improvementText}>\n                      • {improvement}\n                    </Text>\n                  ))}\n                </View>\n              )}\n\n              <View style={styles.summaryActions}>\n                <Button\n                  mode=\"outlined\"\n                  onPress={retryAnalysis}\n                  style={styles.retryButton}\n                >\n                  再分析\n                </Button>\n                <Button\n                  mode=\"contained\"\n                  onPress={() => navigation.goBack()}\n                  style={styles.completeButton}\n                >\n                  完了\n                </Button>\n              </View>\n            </Card.Content>\n          </Card>\n        )}\n\n        {/* 分析履歴 */}\n        {analysisHistory.length > 0 && !sessionSummary && (\n          <Card style={styles.historyCard}>\n            <Card.Content>\n              <Text style={styles.historyTitle}>分析履歴</Text>\n              <Divider style={styles.historyDivider} />\n              {analysisHistory.slice(-3).map((analysis, index) => (\n                <View key={analysis.timestamp} style={styles.historyItem}>\n                  <View style={styles.historyHeader}>\n                    <Text style={styles.historyTime}>\n                      {new Date(analysis.timestamp).toLocaleTimeString('ja-JP')}\n                    </Text>\n                    <Chip\n                      mode=\"outlined\"\n                      compact\n                      style={[styles.historyChip, { borderColor: getScoreColor(analysis.overallScore) }]}\n                      textStyle={{ color: getScoreColor(analysis.overallScore) }}\n                    >\n                      {analysis.overallScore}点\n                    </Chip>\n                  </View>\n                  <Text style={styles.historyFeedback}>\n                    {analysis.feedback.message}\n                  </Text>\n                  {index < Math.min(analysisHistory.length, 3) - 1 && (\n                    <Divider style={styles.historyItemDivider} />\n                  )}\n                </View>\n              ))}\n            </Card.Content>\n          </Card>\n        )}\n\n        {/* 初期化エラー */}\n        {!isInitialized && (\n          <Card style={styles.errorCard}>\n            <Card.Content>\n              <Text style={styles.errorTitle}>AI分析が利用できません</Text>\n              <Text style={styles.errorDescription}>\n                AI分析モデルの初期化に失敗しました。ネットワーク接続を確認してアプリを再起動してください。\n              </Text>\n              <Button\n                mode=\"outlined\"\n                onPress={() => navigation.goBack()}\n                style={styles.errorButton}\n              >\n                戻る\n              </Button>\n            </Card.Content>\n          </Card>\n        )}\n      </ScrollView>\n    </View>\n  );\n};\n\n// ヘルパー関数\nconst getScoreColor = (score) => {\n  if (score >= 80) return '#4CAF50';\n  if (score >= 60) return '#FF9800';\n  return '#F44336';\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#666',\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 20,\n  },\n  errorText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  cameraContainer: {\n    flex: 0.6,\n  },\n  camera: {\n    flex: 1,\n  },\n  cameraOverlay: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    justifyContent: 'space-between',\n  },\n  cameraHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    paddingTop: 40,\n  },\n  exerciseInfo: {\n    flex: 1,\n  },\n  exerciseChip: {\n    backgroundColor: 'rgba(255,255,255,0.9)',\n    borderColor: '#2196F3',\n    borderWidth: 1,\n  },\n  exerciseChipText: {\n    color: '#2196F3',\n    fontSize: 12,\n  },\n  flipButton: {\n    backgroundColor: 'rgba(0,0,0,0.3)',\n  },\n  recordingIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(244,67,54,0.9)',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    alignSelf: 'center',\n  },\n  recordingDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#fff',\n    marginRight: 8,\n  },\n  recordingText: {\n    color: '#fff',\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  cameraControls: {\n    alignItems: 'center',\n    paddingBottom: 40,\n  },\n  startButton: {\n    backgroundColor: '#4CAF50',\n    paddingHorizontal: 32,\n  },\n  stopButton: {\n    paddingHorizontal: 32,\n  },\n  analysisContainer: {\n    flex: 0.4,\n    backgroundColor: '#f5f5f5',\n  },\n  currentAnalysis: {\n    margin: 8,\n  },\n  summaryCard: {\n    margin: 8,\n    elevation: 4,\n  },\n  summaryTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  summaryStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#2196F3',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  improvementsSection: {\n    marginBottom: 20,\n    padding: 12,\n    backgroundColor: '#fff3cd',\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#ffc107',\n  },\n  improvementsTitle: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: '#856404',\n  },\n  improvementText: {\n    fontSize: 12,\n    color: '#856404',\n    lineHeight: 18,\n  },\n  summaryActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  retryButton: {\n    flex: 0.4,\n  },\n  completeButton: {\n    flex: 0.4,\n  },\n  historyCard: {\n    margin: 8,\n    elevation: 2,\n  },\n  historyTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 8,\n  },\n  historyDivider: {\n    marginBottom: 12,\n  },\n  historyItem: {\n    marginBottom: 12,\n  },\n  historyHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  historyTime: {\n    fontSize: 12,\n    color: '#666',\n  },\n  historyChip: {\n    borderWidth: 1,\n  },\n  historyFeedback: {\n    fontSize: 12,\n    color: '#333',\n    lineHeight: 16,\n  },\n  historyItemDivider: {\n    marginTop: 8,\n  },\n  errorCard: {\n    margin: 8,\n    elevation: 2,\n    backgroundColor: '#ffebee',\n  },\n  errorTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 8,\n  },\n  errorDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 20,\n    marginBottom: 16,\n  },\n  errorButton: {\n    alignSelf: 'center',\n  },\n});\n\nexport default AIAnalysisScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}