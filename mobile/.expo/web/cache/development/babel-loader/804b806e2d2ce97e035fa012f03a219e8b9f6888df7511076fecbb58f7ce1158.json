{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/shota/Desktop/\\u6587\\u732E\\u691C\\u7D22/acl-rehab-app/mobile/src/screens/AIAnalysisScreen.js\",\n  _this = this;\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Text, Card, Button, ActivityIndicator, Chip, Divider, IconButton } from 'react-native-paper';\nimport AIAnalysisDisplay from \"../components/AIAnalysisDisplay\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _Dimensions$get = Dimensions.get('window'),\n  screenWidth = _Dimensions$get.width,\n  screenHeight = _Dimensions$get.height;\nvar AIAnalysisScreen = function AIAnalysisScreen(_ref) {\n  var _route$params, _route$params2;\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(Camera.Constants.Type.front),\n    _useState4 = _slicedToArray(_useState3, 2),\n    cameraType = _useState4[0],\n    setCameraType = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isRecording = _useState6[0],\n    setIsRecording = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    isAnalyzing = _useState8[0],\n    setIsAnalyzing = _useState8[1];\n  var _useState9 = useState(null),\n    _useState0 = _slicedToArray(_useState9, 2),\n    currentAnalysis = _useState0[0],\n    setCurrentAnalysis = _useState0[1];\n  var _useState1 = useState(null),\n    _useState10 = _slicedToArray(_useState1, 2),\n    sessionSummary = _useState10[0],\n    setSessionSummary = _useState10[1];\n  var _useState11 = useState([]),\n    _useState12 = _slicedToArray(_useState11, 2),\n    analysisHistory = _useState12[0],\n    setAnalysisHistory = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isInitialized = _useState14[0],\n    setIsInitialized = _useState14[1];\n  var cameraRef = useRef(null);\n  var analysisIntervalRef = useRef(null);\n  var exerciseType = ((_route$params = route.params) == null ? void 0 : _route$params.exerciseType) || 'squat';\n  var exerciseName = ((_route$params2 = route.params) == null ? void 0 : _route$params2.exerciseName) || 'AI動作分析';\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var cameraStatus = yield Camera.requestCameraPermissionsAsync();\n      var mediaLibraryStatus = yield MediaLibrary.requestPermissionsAsync();\n      setHasPermission(cameraStatus.status === 'granted' && mediaLibraryStatus.status === 'granted');\n      try {\n        var initialized = yield aiAnalysisService.initializeModel();\n        setIsInitialized(initialized);\n      } catch (error) {\n        console.error('AI分析サービス初期化エラー:', error);\n        setIsInitialized(false);\n      }\n    })();\n    return function () {\n      if (analysisIntervalRef.current) {\n        clearInterval(analysisIntervalRef.current);\n      }\n    };\n  }, []);\n  var startAnalysis = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (!cameraRef.current || !isInitialized) {\n        Alert.alert('エラー', 'カメラまたはAI分析の準備ができていません。');\n        return;\n      }\n      setIsRecording(true);\n      setIsAnalyzing(true);\n      aiAnalysisService.resetAnalysis();\n      setAnalysisHistory([]);\n      setCurrentAnalysis(null);\n      analysisIntervalRef.current = setInterval(_asyncToGenerator(function* () {\n        try {\n          var dummyKeypoints = generateDummyKeypoints();\n          var result = yield aiAnalysisService.analyzeFrame(dummyKeypoints, exerciseType);\n          setCurrentAnalysis(result);\n          setAnalysisHistory(function (prev) {\n            return [].concat(_toConsumableArray(prev), [result]).slice(-10);\n          });\n        } catch (error) {\n          console.error('フレーム分析エラー:', error);\n        }\n      }), 2000);\n    });\n    return function startAnalysis() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var stopAnalysis = function stopAnalysis() {\n    setIsRecording(false);\n    setIsAnalyzing(false);\n    if (analysisIntervalRef.current) {\n      clearInterval(analysisIntervalRef.current);\n      analysisIntervalRef.current = null;\n    }\n    var summary = aiAnalysisService.getSessionSummary();\n    setSessionSummary(summary);\n    Alert.alert('AI分析完了', `分析フレーム数: ${summary.totalFrames}\\n平均スコア: ${summary.averageScore}点\\n問題検出: ${summary.issueCount}回`, [{\n      text: '確認',\n      onPress: function onPress() {}\n    }]);\n  };\n  var toggleCameraType = function toggleCameraType() {\n    setCameraType(cameraType === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back);\n  };\n  var retryAnalysis = function retryAnalysis() {\n    setCurrentAnalysis(null);\n    setSessionSummary(null);\n    setAnalysisHistory([]);\n    aiAnalysisService.resetAnalysis();\n  };\n  var generateDummyKeypoints = function generateDummyKeypoints() {\n    var keypoints = [];\n    var baseX = screenWidth / 2;\n    var baseY = screenHeight / 2;\n    for (var i = 0; i < 17; i++) {\n      keypoints.push({\n        x: baseX + (Math.random() - 0.5) * 100,\n        y: baseY + (Math.random() - 0.5) * 200,\n        score: 0.8 + Math.random() * 0.2\n      });\n    }\n    return keypoints;\n  };\n  if (hasPermission === null) {\n    return _jsxDEV(View, {\n      style: styles.loadingContainer,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, _this), _jsxDEV(Text, {\n        style: styles.loadingText,\n        children: \"\\u30AB\\u30E1\\u30E9\\u306E\\u6E96\\u5099\\u4E2D...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, _this);\n  }\n  if (hasPermission === false) {\n    return _jsxDEV(View, {\n      style: styles.errorContainer,\n      children: [_jsxDEV(Text, {\n        style: styles.errorText,\n        children: \"\\u30AB\\u30E1\\u30E9\\u3078\\u306E\\u30A2\\u30AF\\u30BB\\u30B9\\u304C\\u5FC5\\u8981\\u3067\\u3059\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, _this), _jsxDEV(Button, {\n        mode: \"contained\",\n        onPress: function onPress() {\n          return navigation.goBack();\n        },\n        children: \"\\u623B\\u308B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, _this);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.cameraContainer,\n      children: _jsxDEV(Camera, {\n        ref: cameraRef,\n        style: styles.camera,\n        type: cameraType,\n        ratio: \"16:9\",\n        children: _jsxDEV(View, {\n          style: styles.cameraOverlay,\n          children: [_jsxDEV(View, {\n            style: styles.cameraHeader,\n            children: [_jsxDEV(View, {\n              style: styles.exerciseInfo,\n              children: _jsxDEV(Chip, {\n                mode: \"outlined\",\n                style: styles.exerciseChip,\n                textStyle: styles.exerciseChipText,\n                children: exerciseName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, _this), _jsxDEV(IconButton, {\n              icon: \"camera-flip\",\n              size: 24,\n              iconColor: \"#fff\",\n              onPress: toggleCameraType,\n              style: styles.flipButton\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, _this), isRecording && _jsxDEV(View, {\n            style: styles.recordingIndicator,\n            children: [_jsxDEV(View, {\n              style: styles.recordingDot\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 17\n            }, _this), _jsxDEV(Text, {\n              style: styles.recordingText,\n              children: \"AI\\u5206\\u6790\\u4E2D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, _this), _jsxDEV(View, {\n            style: styles.cameraControls,\n            children: !isRecording ? _jsxDEV(Button, {\n              mode: \"contained\",\n              onPress: startAnalysis,\n              style: styles.startButton,\n              disabled: !isInitialized,\n              children: \"\\u5206\\u6790\\u958B\\u59CB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, _this) : _jsxDEV(Button, {\n              mode: \"contained\",\n              onPress: stopAnalysis,\n              style: styles.stopButton,\n              buttonColor: \"#F44336\",\n              children: \"\\u5206\\u6790\\u505C\\u6B62\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, _this), _jsxDEV(ScrollView, {\n      style: styles.analysisContainer,\n      children: [(currentAnalysis || isAnalyzing) && _jsxDEV(AIAnalysisDisplay, {\n        analysisResult: currentAnalysis,\n        isAnalyzing: isAnalyzing && !currentAnalysis,\n        style: styles.currentAnalysis\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, _this), sessionSummary && _jsxDEV(Card, {\n        style: styles.summaryCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Text, {\n            style: styles.summaryTitle,\n            children: \"\\u30BB\\u30C3\\u30B7\\u30E7\\u30F3\\u5206\\u6790\\u7D50\\u679C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, _this), _jsxDEV(View, {\n            style: styles.summaryStats,\n            children: [_jsxDEV(View, {\n              style: styles.statItem,\n              children: [_jsxDEV(Text, {\n                style: styles.statValue,\n                children: sessionSummary.totalFrames\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.statLabel,\n                children: \"\\u5206\\u6790\\u30D5\\u30EC\\u30FC\\u30E0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, _this), _jsxDEV(View, {\n              style: styles.statItem,\n              children: [_jsxDEV(Text, {\n                style: [styles.statValue, {\n                  color: getScoreColor(sessionSummary.averageScore)\n                }],\n                children: sessionSummary.averageScore\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.statLabel,\n                children: \"\\u5E73\\u5747\\u30B9\\u30B3\\u30A2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, _this), _jsxDEV(View, {\n              style: styles.statItem,\n              children: [_jsxDEV(Text, {\n                style: [styles.statValue, {\n                  color: sessionSummary.issueCount > 0 ? '#F44336' : '#4CAF50'\n                }],\n                children: sessionSummary.issueCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.statLabel,\n                children: \"\\u554F\\u984C\\u691C\\u51FA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, _this), sessionSummary.improvements.length > 0 && _jsxDEV(View, {\n            style: styles.improvementsSection,\n            children: [_jsxDEV(Text, {\n              style: styles.improvementsTitle,\n              children: \"\\u6539\\u5584\\u63D0\\u6848\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 19\n            }, _this), sessionSummary.improvements.map(function (improvement, index) {\n              return _jsxDEV(Text, {\n                style: styles.improvementText,\n                children: [\"\\u2022 \", improvement]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, _this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 17\n          }, _this), _jsxDEV(View, {\n            style: styles.summaryActions,\n            children: [_jsxDEV(Button, {\n              mode: \"outlined\",\n              onPress: retryAnalysis,\n              style: styles.retryButton,\n              children: \"\\u518D\\u5206\\u6790\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, _this), _jsxDEV(Button, {\n              mode: \"contained\",\n              onPress: function onPress() {\n                return navigation.goBack();\n              },\n              style: styles.completeButton,\n              children: \"\\u5B8C\\u4E86\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, _this), analysisHistory.length > 0 && !sessionSummary && _jsxDEV(Card, {\n        style: styles.historyCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Text, {\n            style: styles.historyTitle,\n            children: \"\\u5206\\u6790\\u5C65\\u6B74\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 15\n          }, _this), _jsxDEV(Divider, {\n            style: styles.historyDivider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 15\n          }, _this), analysisHistory.slice(-3).map(function (analysis, index) {\n            return _jsxDEV(View, {\n              style: styles.historyItem,\n              children: [_jsxDEV(View, {\n                style: styles.historyHeader,\n                children: [_jsxDEV(Text, {\n                  style: styles.historyTime,\n                  children: new Date(analysis.timestamp).toLocaleTimeString('ja-JP')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 21\n                }, _this), _jsxDEV(Chip, {\n                  mode: \"outlined\",\n                  compact: true,\n                  style: [styles.historyChip, {\n                    borderColor: getScoreColor(analysis.overallScore)\n                  }],\n                  textStyle: {\n                    color: getScoreColor(analysis.overallScore)\n                  },\n                  children: [analysis.overallScore, \"\\u70B9\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 19\n              }, _this), _jsxDEV(Text, {\n                style: styles.historyFeedback,\n                children: analysis.feedback.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, _this), index < Math.min(analysisHistory.length, 3) - 1 && _jsxDEV(Divider, {\n                style: styles.historyItemDivider\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 21\n              }, _this)]\n            }, analysis.timestamp, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, _this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 11\n      }, _this), !isInitialized && _jsxDEV(Card, {\n        style: styles.errorCard,\n        children: _jsxDEV(Card.Content, {\n          children: [_jsxDEV(Text, {\n            style: styles.errorTitle,\n            children: \"AI\\u5206\\u6790\\u304C\\u5229\\u7528\\u3067\\u304D\\u307E\\u305B\\u3093\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, _this), _jsxDEV(Text, {\n            style: styles.errorDescription,\n            children: \"AI\\u5206\\u6790\\u30E2\\u30C7\\u30EB\\u306E\\u521D\\u671F\\u5316\\u306B\\u5931\\u6557\\u3057\\u307E\\u3057\\u305F\\u3002\\u30CD\\u30C3\\u30C8\\u30EF\\u30FC\\u30AF\\u63A5\\u7D9A\\u3092\\u78BA\\u8A8D\\u3057\\u3066\\u30A2\\u30D7\\u30EA\\u3092\\u518D\\u8D77\\u52D5\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, _this), _jsxDEV(Button, {\n            mode: \"outlined\",\n            onPress: function onPress() {\n              return navigation.goBack();\n            },\n            style: styles.errorButton,\n            children: \"\\u623B\\u308B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 5\n  }, _this);\n};\nvar getScoreColor = function getScoreColor(score) {\n  if (score >= 80) return '#4CAF50';\n  if (score >= 60) return '#FF9800';\n  return '#F44336';\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5'\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#666'\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 20\n  },\n  errorText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 20,\n    textAlign: 'center'\n  },\n  cameraContainer: {\n    flex: 0.6\n  },\n  camera: {\n    flex: 1\n  },\n  cameraOverlay: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    justifyContent: 'space-between'\n  },\n  cameraHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    paddingTop: 40\n  },\n  exerciseInfo: {\n    flex: 1\n  },\n  exerciseChip: {\n    backgroundColor: 'rgba(255,255,255,0.9)',\n    borderColor: '#2196F3',\n    borderWidth: 1\n  },\n  exerciseChipText: {\n    color: '#2196F3',\n    fontSize: 12\n  },\n  flipButton: {\n    backgroundColor: 'rgba(0,0,0,0.3)'\n  },\n  recordingIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(244,67,54,0.9)',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    alignSelf: 'center'\n  },\n  recordingDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#fff',\n    marginRight: 8\n  },\n  recordingText: {\n    color: '#fff',\n    fontSize: 14,\n    fontWeight: 'bold'\n  },\n  cameraControls: {\n    alignItems: 'center',\n    paddingBottom: 40\n  },\n  startButton: {\n    backgroundColor: '#4CAF50',\n    paddingHorizontal: 32\n  },\n  stopButton: {\n    paddingHorizontal: 32\n  },\n  analysisContainer: {\n    flex: 0.4,\n    backgroundColor: '#f5f5f5'\n  },\n  currentAnalysis: {\n    margin: 8\n  },\n  summaryCard: {\n    margin: 8,\n    elevation: 4\n  },\n  summaryTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center'\n  },\n  summaryStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20\n  },\n  statItem: {\n    alignItems: 'center'\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#2196F3'\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4\n  },\n  improvementsSection: {\n    marginBottom: 20,\n    padding: 12,\n    backgroundColor: '#fff3cd',\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#ffc107'\n  },\n  improvementsTitle: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: '#856404'\n  },\n  improvementText: {\n    fontSize: 12,\n    color: '#856404',\n    lineHeight: 18\n  },\n  summaryActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-around'\n  },\n  retryButton: {\n    flex: 0.4\n  },\n  completeButton: {\n    flex: 0.4\n  },\n  historyCard: {\n    margin: 8,\n    elevation: 2\n  },\n  historyTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 8\n  },\n  historyDivider: {\n    marginBottom: 12\n  },\n  historyItem: {\n    marginBottom: 12\n  },\n  historyHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4\n  },\n  historyTime: {\n    fontSize: 12,\n    color: '#666'\n  },\n  historyChip: {\n    borderWidth: 1\n  },\n  historyFeedback: {\n    fontSize: 12,\n    color: '#333',\n    lineHeight: 16\n  },\n  historyItemDivider: {\n    marginTop: 8\n  },\n  errorCard: {\n    margin: 8,\n    elevation: 2,\n    backgroundColor: '#ffebee'\n  },\n  errorTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 8\n  },\n  errorDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 20,\n    marginBottom: 16\n  },\n  errorButton: {\n    alignSelf: 'center'\n  }\n});\nexport default AIAnalysisScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","StyleSheet","ScrollView","Alert","Dimensions","Text","Card","Button","ActivityIndicator","Chip","Divider","IconButton","AIAnalysisDisplay","jsxDEV","_jsxDEV","_Dimensions$get","get","screenWidth","width","screenHeight","height","AIAnalysisScreen","_ref","_route$params","_route$params2","navigation","route","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","Camera","Constants","Type","front","_useState4","cameraType","setCameraType","_useState5","_useState6","isRecording","setIsRecording","_useState7","_useState8","isAnalyzing","setIsAnalyzing","_useState9","_useState0","currentAnalysis","setCurrentAnalysis","_useState1","_useState10","sessionSummary","setSessionSummary","_useState11","_useState12","analysisHistory","setAnalysisHistory","_useState13","_useState14","isInitialized","setIsInitialized","cameraRef","analysisIntervalRef","exerciseType","params","exerciseName","_asyncToGenerator","cameraStatus","requestCameraPermissionsAsync","mediaLibraryStatus","MediaLibrary","requestPermissionsAsync","status","initialized","aiAnalysisService","initializeModel","error","console","current","clearInterval","startAnalysis","_ref3","alert","resetAnalysis","setInterval","dummyKeypoints","generateDummyKeypoints","result","analyzeFrame","prev","concat","_toConsumableArray","slice","apply","arguments","stopAnalysis","summary","getSessionSummary","totalFrames","averageScore","issueCount","text","onPress","toggleCameraType","back","retryAnalysis","keypoints","baseX","baseY","i","push","x","Math","random","y","score","style","styles","loadingContainer","children","size","fileName","_jsxFileName","lineNumber","columnNumber","_this","loadingText","errorContainer","errorText","mode","goBack","container","cameraContainer","ref","camera","type","ratio","cameraOverlay","cameraHeader","exerciseInfo","exerciseChip","textStyle","exerciseChipText","icon","iconColor","flipButton","recordingIndicator","recordingDot","recordingText","cameraControls","startButton","disabled","stopButton","buttonColor","analysisContainer","analysisResult","summaryCard","Content","summaryTitle","summaryStats","statItem","statValue","statLabel","color","getScoreColor","improvements","length","improvementsSection","improvementsTitle","map","improvement","index","improvementText","summaryActions","retryButton","completeButton","historyCard","historyTitle","historyDivider","analysis","historyItem","historyHeader","historyTime","Date","timestamp","toLocaleTimeString","compact","historyChip","borderColor","overallScore","historyFeedback","feedback","message","min","historyItemDivider","errorCard","errorTitle","errorDescription","errorButton","create","flex","backgroundColor","justifyContent","alignItems","marginTop","fontSize","padding","fontWeight","marginBottom","textAlign","flexDirection","paddingTop","borderWidth","paddingHorizontal","paddingVertical","borderRadius","alignSelf","marginRight","paddingBottom","margin","elevation","borderLeftWidth","borderLeftColor","lineHeight"],"sources":["/Users/shota/Desktop/文献検索/acl-rehab-app/mobile/src/screens/AIAnalysisScreen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport {\n  View,\n  StyleSheet,\n  ScrollView,\n  Alert,\n  Dimensions,\n} from 'react-native';\nimport {\n  Text,\n  Card,\n  Button,\n  ActivityIndicator,\n  Chip,\n  Divider,\n  IconButton,\n} from 'react-native-paper';\n// import { Camera } from 'expo-camera';\n// import * as MediaLibrary from 'expo-media-library';\nimport AIAnalysisDisplay from '../components/AIAnalysisDisplay';\n// import aiAnalysisService from '../services/aiAnalysis';\n\nconst { width: screenWidth, height: screenHeight } = Dimensions.get('window');\n\nconst AIAnalysisScreen = ({ navigation, route }) => {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [cameraType, setCameraType] = useState(Camera.Constants.Type.front);\n  const [isRecording, setIsRecording] = useState(false);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [currentAnalysis, setCurrentAnalysis] = useState(null);\n  const [sessionSummary, setSessionSummary] = useState(null);\n  const [analysisHistory, setAnalysisHistory] = useState([]);\n  const [isInitialized, setIsInitialized] = useState(false);\n  \n  const cameraRef = useRef(null);\n  const analysisIntervalRef = useRef(null);\n  \n  const exerciseType = route.params?.exerciseType || 'squat';\n  const exerciseName = route.params?.exerciseName || 'AI動作分析';\n\n  useEffect(() => {\n    (async () => {\n      // カメラ権限の取得\n      const cameraStatus = await Camera.requestCameraPermissionsAsync();\n      const mediaLibraryStatus = await MediaLibrary.requestPermissionsAsync();\n      \n      setHasPermission(\n        cameraStatus.status === 'granted' && mediaLibraryStatus.status === 'granted'\n      );\n\n      // AI分析サービス初期化\n      try {\n        const initialized = await aiAnalysisService.initializeModel();\n        setIsInitialized(initialized);\n      } catch (error) {\n        console.error('AI分析サービス初期化エラー:', error);\n        setIsInitialized(false);\n      }\n    })();\n\n    return () => {\n      // クリーンアップ\n      if (analysisIntervalRef.current) {\n        clearInterval(analysisIntervalRef.current);\n      }\n    };\n  }, []);\n\n  const startAnalysis = async () => {\n    if (!cameraRef.current || !isInitialized) {\n      Alert.alert('エラー', 'カメラまたはAI分析の準備ができていません。');\n      return;\n    }\n\n    setIsRecording(true);\n    setIsAnalyzing(true);\n    aiAnalysisService.resetAnalysis();\n    setAnalysisHistory([]);\n    setCurrentAnalysis(null);\n\n    // 定期的な分析実行（実際の実装では pose estimation ライブラリと連携）\n    analysisIntervalRef.current = setInterval(async () => {\n      try {\n        // ダミーのキーポイントデータ（実際の実装では pose estimation から取得）\n        const dummyKeypoints = generateDummyKeypoints();\n        \n        const result = await aiAnalysisService.analyzeFrame(dummyKeypoints, exerciseType);\n        \n        setCurrentAnalysis(result);\n        setAnalysisHistory(prev => [...prev, result].slice(-10)); // 最新10件を保持\n        \n      } catch (error) {\n        console.error('フレーム分析エラー:', error);\n      }\n    }, 2000); // 2秒間隔で分析\n  };\n\n  const stopAnalysis = () => {\n    setIsRecording(false);\n    setIsAnalyzing(false);\n    \n    if (analysisIntervalRef.current) {\n      clearInterval(analysisIntervalRef.current);\n      analysisIntervalRef.current = null;\n    }\n\n    // セッションサマリー生成\n    const summary = aiAnalysisService.getSessionSummary();\n    setSessionSummary(summary);\n\n    Alert.alert(\n      'AI分析完了',\n      `分析フレーム数: ${summary.totalFrames}\\n平均スコア: ${summary.averageScore}点\\n問題検出: ${summary.issueCount}回`,\n      [\n        { text: '確認', onPress: () => {} }\n      ]\n    );\n  };\n\n  const toggleCameraType = () => {\n    setCameraType(\n      cameraType === Camera.Constants.Type.back\n        ? Camera.Constants.Type.front\n        : Camera.Constants.Type.back\n    );\n  };\n\n  const retryAnalysis = () => {\n    setCurrentAnalysis(null);\n    setSessionSummary(null);\n    setAnalysisHistory([]);\n    aiAnalysisService.resetAnalysis();\n  };\n\n  // ダミーキーポイント生成（実際の実装では pose estimation ライブラリから取得）\n  const generateDummyKeypoints = () => {\n    const keypoints = [];\n    \n    // 主要な関節点をダミーで生成\n    const baseX = screenWidth / 2;\n    const baseY = screenHeight / 2;\n    \n    for (let i = 0; i < 17; i++) {\n      keypoints.push({\n        x: baseX + (Math.random() - 0.5) * 100,\n        y: baseY + (Math.random() - 0.5) * 200,\n        score: 0.8 + Math.random() * 0.2\n      });\n    }\n    \n    return keypoints;\n  };\n\n  if (hasPermission === null) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" />\n        <Text style={styles.loadingText}>カメラの準備中...</Text>\n      </View>\n    );\n  }\n\n  if (hasPermission === false) {\n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>カメラへのアクセスが必要です</Text>\n        <Button mode=\"contained\" onPress={() => navigation.goBack()}>\n          戻る\n        </Button>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {/* カメラビュー */}\n      <View style={styles.cameraContainer}>\n        <Camera\n          ref={cameraRef}\n          style={styles.camera}\n          type={cameraType}\n          ratio=\"16:9\"\n        >\n          {/* カメラオーバーレイ */}\n          <View style={styles.cameraOverlay}>\n            {/* ヘッダー */}\n            <View style={styles.cameraHeader}>\n              <View style={styles.exerciseInfo}>\n                <Chip\n                  mode=\"outlined\"\n                  style={styles.exerciseChip}\n                  textStyle={styles.exerciseChipText}\n                >\n                  {exerciseName}\n                </Chip>\n              </View>\n              <IconButton\n                icon=\"camera-flip\"\n                size={24}\n                iconColor=\"#fff\"\n                onPress={toggleCameraType}\n                style={styles.flipButton}\n              />\n            </View>\n\n            {/* 録画状態インジケーター */}\n            {isRecording && (\n              <View style={styles.recordingIndicator}>\n                <View style={styles.recordingDot} />\n                <Text style={styles.recordingText}>AI分析中</Text>\n              </View>\n            )}\n\n            {/* コントロールボタン */}\n            <View style={styles.cameraControls}>\n              {!isRecording ? (\n                <Button\n                  mode=\"contained\"\n                  onPress={startAnalysis}\n                  style={styles.startButton}\n                  disabled={!isInitialized}\n                >\n                  分析開始\n                </Button>\n              ) : (\n                <Button\n                  mode=\"contained\"\n                  onPress={stopAnalysis}\n                  style={styles.stopButton}\n                  buttonColor=\"#F44336\"\n                >\n                  分析停止\n                </Button>\n              )}\n            </View>\n          </View>\n        </Camera>\n      </View>\n\n      {/* 分析結果表示エリア */}\n      <ScrollView style={styles.analysisContainer}>\n        {/* 現在の分析結果 */}\n        {(currentAnalysis || isAnalyzing) && (\n          <AIAnalysisDisplay\n            analysisResult={currentAnalysis}\n            isAnalyzing={isAnalyzing && !currentAnalysis}\n            style={styles.currentAnalysis}\n          />\n        )}\n\n        {/* セッションサマリー */}\n        {sessionSummary && (\n          <Card style={styles.summaryCard}>\n            <Card.Content>\n              <Text style={styles.summaryTitle}>セッション分析結果</Text>\n              \n              <View style={styles.summaryStats}>\n                <View style={styles.statItem}>\n                  <Text style={styles.statValue}>{sessionSummary.totalFrames}</Text>\n                  <Text style={styles.statLabel}>分析フレーム</Text>\n                </View>\n                <View style={styles.statItem}>\n                  <Text style={[styles.statValue, { color: getScoreColor(sessionSummary.averageScore) }]}>\n                    {sessionSummary.averageScore}\n                  </Text>\n                  <Text style={styles.statLabel}>平均スコア</Text>\n                </View>\n                <View style={styles.statItem}>\n                  <Text style={[styles.statValue, { color: sessionSummary.issueCount > 0 ? '#F44336' : '#4CAF50' }]}>\n                    {sessionSummary.issueCount}\n                  </Text>\n                  <Text style={styles.statLabel}>問題検出</Text>\n                </View>\n              </View>\n\n              {sessionSummary.improvements.length > 0 && (\n                <View style={styles.improvementsSection}>\n                  <Text style={styles.improvementsTitle}>改善提案</Text>\n                  {sessionSummary.improvements.map((improvement, index) => (\n                    <Text key={index} style={styles.improvementText}>\n                      • {improvement}\n                    </Text>\n                  ))}\n                </View>\n              )}\n\n              <View style={styles.summaryActions}>\n                <Button\n                  mode=\"outlined\"\n                  onPress={retryAnalysis}\n                  style={styles.retryButton}\n                >\n                  再分析\n                </Button>\n                <Button\n                  mode=\"contained\"\n                  onPress={() => navigation.goBack()}\n                  style={styles.completeButton}\n                >\n                  完了\n                </Button>\n              </View>\n            </Card.Content>\n          </Card>\n        )}\n\n        {/* 分析履歴 */}\n        {analysisHistory.length > 0 && !sessionSummary && (\n          <Card style={styles.historyCard}>\n            <Card.Content>\n              <Text style={styles.historyTitle}>分析履歴</Text>\n              <Divider style={styles.historyDivider} />\n              {analysisHistory.slice(-3).map((analysis, index) => (\n                <View key={analysis.timestamp} style={styles.historyItem}>\n                  <View style={styles.historyHeader}>\n                    <Text style={styles.historyTime}>\n                      {new Date(analysis.timestamp).toLocaleTimeString('ja-JP')}\n                    </Text>\n                    <Chip\n                      mode=\"outlined\"\n                      compact\n                      style={[styles.historyChip, { borderColor: getScoreColor(analysis.overallScore) }]}\n                      textStyle={{ color: getScoreColor(analysis.overallScore) }}\n                    >\n                      {analysis.overallScore}点\n                    </Chip>\n                  </View>\n                  <Text style={styles.historyFeedback}>\n                    {analysis.feedback.message}\n                  </Text>\n                  {index < Math.min(analysisHistory.length, 3) - 1 && (\n                    <Divider style={styles.historyItemDivider} />\n                  )}\n                </View>\n              ))}\n            </Card.Content>\n          </Card>\n        )}\n\n        {/* 初期化エラー */}\n        {!isInitialized && (\n          <Card style={styles.errorCard}>\n            <Card.Content>\n              <Text style={styles.errorTitle}>AI分析が利用できません</Text>\n              <Text style={styles.errorDescription}>\n                AI分析モデルの初期化に失敗しました。ネットワーク接続を確認してアプリを再起動してください。\n              </Text>\n              <Button\n                mode=\"outlined\"\n                onPress={() => navigation.goBack()}\n                style={styles.errorButton}\n              >\n                戻る\n              </Button>\n            </Card.Content>\n          </Card>\n        )}\n      </ScrollView>\n    </View>\n  );\n};\n\n// ヘルパー関数\nconst getScoreColor = (score) => {\n  if (score >= 80) return '#4CAF50';\n  if (score >= 60) return '#FF9800';\n  return '#F44336';\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#000',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: '#666',\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f5f5f5',\n    padding: 20,\n  },\n  errorText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  cameraContainer: {\n    flex: 0.6,\n  },\n  camera: {\n    flex: 1,\n  },\n  cameraOverlay: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    justifyContent: 'space-between',\n  },\n  cameraHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    paddingTop: 40,\n  },\n  exerciseInfo: {\n    flex: 1,\n  },\n  exerciseChip: {\n    backgroundColor: 'rgba(255,255,255,0.9)',\n    borderColor: '#2196F3',\n    borderWidth: 1,\n  },\n  exerciseChipText: {\n    color: '#2196F3',\n    fontSize: 12,\n  },\n  flipButton: {\n    backgroundColor: 'rgba(0,0,0,0.3)',\n  },\n  recordingIndicator: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: 'rgba(244,67,54,0.9)',\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    alignSelf: 'center',\n  },\n  recordingDot: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: '#fff',\n    marginRight: 8,\n  },\n  recordingText: {\n    color: '#fff',\n    fontSize: 14,\n    fontWeight: 'bold',\n  },\n  cameraControls: {\n    alignItems: 'center',\n    paddingBottom: 40,\n  },\n  startButton: {\n    backgroundColor: '#4CAF50',\n    paddingHorizontal: 32,\n  },\n  stopButton: {\n    paddingHorizontal: 32,\n  },\n  analysisContainer: {\n    flex: 0.4,\n    backgroundColor: '#f5f5f5',\n  },\n  currentAnalysis: {\n    margin: 8,\n  },\n  summaryCard: {\n    margin: 8,\n    elevation: 4,\n  },\n  summaryTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  summaryStats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20,\n  },\n  statItem: {\n    alignItems: 'center',\n  },\n  statValue: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#2196F3',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#666',\n    marginTop: 4,\n  },\n  improvementsSection: {\n    marginBottom: 20,\n    padding: 12,\n    backgroundColor: '#fff3cd',\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#ffc107',\n  },\n  improvementsTitle: {\n    fontSize: 14,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: '#856404',\n  },\n  improvementText: {\n    fontSize: 12,\n    color: '#856404',\n    lineHeight: 18,\n  },\n  summaryActions: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  retryButton: {\n    flex: 0.4,\n  },\n  completeButton: {\n    flex: 0.4,\n  },\n  historyCard: {\n    margin: 8,\n    elevation: 2,\n  },\n  historyTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 8,\n  },\n  historyDivider: {\n    marginBottom: 12,\n  },\n  historyItem: {\n    marginBottom: 12,\n  },\n  historyHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  historyTime: {\n    fontSize: 12,\n    color: '#666',\n  },\n  historyChip: {\n    borderWidth: 1,\n  },\n  historyFeedback: {\n    fontSize: 12,\n    color: '#333',\n    lineHeight: 16,\n  },\n  historyItemDivider: {\n    marginTop: 8,\n  },\n  errorCard: {\n    margin: 8,\n    elevation: 2,\n    backgroundColor: '#ffebee',\n  },\n  errorTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#F44336',\n    marginBottom: 8,\n  },\n  errorDescription: {\n    fontSize: 14,\n    color: '#666',\n    lineHeight: 20,\n    marginBottom: 16,\n  },\n  errorButton: {\n    alignSelf: 'center',\n  },\n});\n\nexport default AIAnalysisScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}